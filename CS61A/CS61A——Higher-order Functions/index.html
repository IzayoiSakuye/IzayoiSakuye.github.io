<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"izayoisakuye.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.23.2","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":false,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Higher-Order Functions 函数特征  一个函数的定义域(domain)即为所有可能的输入 一个函数的值域(range)即为所有可能的输出 一个纯函数表现即为建立输入与输出之间的映射  assert语句 格式：assert &lt;bool expression&gt; &lt;output information&gt; 用处：当布尔表达式成立时，语句继续执行">
<meta property="og:type" content="article">
<meta property="og:title" content="【CS61A】CS61A——Higher-Order Functions">
<meta property="og:url" content="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Higher-order%20Functions/index.html">
<meta property="og:site_name" content="红魔咖啡馆">
<meta property="og:description" content="Higher-Order Functions 函数特征  一个函数的定义域(domain)即为所有可能的输入 一个函数的值域(range)即为所有可能的输出 一个纯函数表现即为建立输入与输出之间的映射  assert语句 格式：assert &lt;bool expression&gt; &lt;output information&gt; 用处：当布尔表达式成立时，语句继续执行">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Higher-order%20Functions/image-20250118151740899.png">
<meta property="article:published_time" content="2025-01-19T01:03:01.170Z">
<meta property="article:modified_time" content="2025-07-31T09:50:12.627Z">
<meta property="article:author" content="IzayoiSakuye">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="CS61A">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Higher-order%20Functions/image-20250118151740899.png">


<link rel="canonical" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Higher-order%20Functions/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Higher-order%20Functions/","path":"CS61A/CS61A——Higher-order Functions/","title":"【CS61A】CS61A——Higher-Order Functions"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>【CS61A】CS61A——Higher-Order Functions | 红魔咖啡馆</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#90a4ae;--hl-bg:#f6f8fa;--hltools-bg:#e6ebf1;--hltools-color:#90a4ae;--hlnumber-bg:#f6f8fa;--hlnumber-color:rgba(144,164,174,0.5);--hlscrollbar-bg:#dce4eb;--hlexpand-bg:linear-gradient(180deg,rgba(246,248,250,0.1),rgba(246,248,250,0.9))}</style><!-- hexo injector head_end end --><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">红魔咖啡馆</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">头发越掉越多，头发越掉越少</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">21</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">6</span></a></li><li class="menu-item menu-item-passages"><a href="/list/" rel="section"><i class="fa-regular fa-file fa-fw"></i>文章</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#higher-order-functions"><span class="nav-number">1.</span> <span class="nav-text">Higher-Order Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%89%B9%E5%BE%81"><span class="nav-number">1.1.</span> <span class="nav-text">函数特征</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#assert%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.2.</span> <span class="nav-text">assert语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%BD%A2%E5%8F%82"><span class="nav-number">1.3.</span> <span class="nav-text">函数作为形参</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.4.</span> <span class="nav-text">函数作为返回值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">1.5.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0lambda-expressions"><span class="nav-number">1.6.</span> <span class="nav-text">匿名函数(Lambda Expressions )</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E8%AF%AD%E5%8F%A5return-statements"><span class="nav-number">1.7.</span> <span class="nav-text">返回语句(Return Statements)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5control-statements"><span class="nav-number">1.8.</span> <span class="nav-text">控制语句(Control Statements)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.8.1.</span> <span class="nav-text">条件语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%AE%80%E5%8D%95%E5%BD%A2%E5%BC%8F"><span class="nav-number">1.8.1.1.</span> <span class="nav-text">条件语句的简单形式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E7%9F%AD%E8%B7%AF%E6%95%88%E5%BA%94"><span class="nav-number">1.8.2.</span> <span class="nav-text">逻辑运算符的短路效应</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hw"><span class="nav-number">2.</span> <span class="nav-text">HW</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%AF%E9%87%8C%E5%8C%96currying"><span class="nav-number">2.1.</span> <span class="nav-text">柯里化(Currying)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#product"><span class="nav-number">2.2.</span> <span class="nav-text">1-Product</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#accumulate"><span class="nav-number">2.3.</span> <span class="nav-text">2- Accumulate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#make-repeater"><span class="nav-number">2.4.</span> <span class="nav-text">3-Make repeater</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="IzayoiSakuye"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">IzayoiSakuye</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">102</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Higher-order%20Functions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="【CS61A】CS61A——Higher-Order Functions | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【CS61A】CS61A——Higher-Order Functions
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-19 09:03:01" itemprop="dateCreated datePublished" datetime="2025-01-19T09:03:01+08:00">2025-01-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:50:12" itemprop="dateModified" datetime="2025-07-31T17:50:12+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="higher-order-functions">Higher-Order Functions</h1>
<h2 id="函数特征">函数特征</h2>
<ul>
<li>一个函数的定义域(domain)即为所有可能的输入</li>
<li>一个函数的值域(range)即为所有可能的输出</li>
<li>一个纯函数表现即为建立输入与输出之间的映射</li>
</ul>
<h2 id="assert语句">assert语句</h2>
<p>格式：<code>assert &lt;bool expression&gt; &lt;output information&gt;</code></p>
<p>用处：当布尔表达式成立时，语句继续执行；当布尔表达式不成立时，程序跳出并提示指定的报错信息。</p>
<h2 id="函数作为形参">函数作为形参</h2>
<p>设计一个计算求和、立方项求和的函数，我们可以通过在对求和函数中传入对每一位数的操作对应的函数来简化代码，而非为不同种类求和分别设计函数，如下：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">from</span><span style="color: #24292E"> math </span><span style="color: #D73A49">import</span><span style="color: #24292E"> </span><span style="color: #005CC5">pow</span></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">identity</span><span style="color: #24292E">(k):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> k</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">cube</span><span style="color: #24292E">(k):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">int</span><span style="color: #24292E">(</span><span style="color: #005CC5">pow</span><span style="color: #24292E">(k,</span><span style="color: #005CC5">3</span><span style="color: #24292E">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">summation</span><span style="color: #24292E">(n,term):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""sum the first N terms of a sequence.</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">summation(5,cube)</span></span>
<span class="line"><span style="color: #032F62">    225</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    total,k</span><span style="color: #D73A49">=</span><span style="color: #005CC5">0</span><span style="color: #24292E">,</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> k</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n:</span></span>
<span class="line"><span style="color: #24292E">        total,k </span><span style="color: #D73A49">=</span><span style="color: #24292E"> total </span><span style="color: #D73A49">+</span><span style="color: #24292E"> term(k), k</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> total</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">sum_naturals</span><span style="color: #24292E">(n):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""sum the first N natural numbers</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">sum_naturals(5)</span></span>
<span class="line"><span style="color: #032F62">    15</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> summation(n,identity) </span><span style="color: #6A737D"># 传入返回原值函数进行计算</span></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">sum_cubes</span><span style="color: #24292E">(n):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""sum the first N cubes of natural numbers</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">sum_cubes(5)</span></span>
<span class="line"><span style="color: #032F62">    225</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> summation(n,cube) </span><span style="color: #6A737D"># 传入返回每个值的立方函数进行计算</span></span></code></pre></div></div></figure>
<p>其中，summation函数中的term参数与传入的函数有关</p>
<p>identity与cube函数作为单个参数传入summation函数，以处理不同情况下的求和</p>
<p>形参term函数在计算total时被回调，回调的是传入的对应函数</p>
<h2 id="函数作为返回值">函数作为返回值</h2>
<p>当一个函数在另一个函数体内定义，该函数的名称绑定在本地作用域中</p>
<p>如下：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">make_adder</span><span style="color: #24292E">(n):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""return a function that takes one argument called k and return k+N</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">add_three = make_adder(3)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">add_three(4)</span></span>
<span class="line"><span style="color: #032F62">    7</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">adder</span><span style="color: #24292E">(k):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> k</span><span style="color: #D73A49">+</span><span style="color: #24292E">n </span><span style="color: #6A737D"># adder函数返回数值k+n</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> adder </span><span style="color: #6A737D"># make_adder函数返回adder函数</span></span></code></pre></div></div></figure>
<p>make_adder函数返回一个函数adder，而函数adder是局部定义的函数，它可以使用make_adder内部的变量（k与n）</p>
<p>对于语句<code>make_adder(1)(2)</code>，实现的效果即为1+2</p>
<h2 id="作用">作用</h2>
<ol type="1">
<li>函数是第一类值(first-class)：函数可以作为参数传递，作为返回值返回</li>
<li>higher-order函数指代以函数作为参数或返回值的函数
<ol type="1">
<li>它可以表示计算的一般情况</li>
<li>它可以防止程序代码过于重复冗杂</li>
<li>它可以将不同功能分离成多个函数</li>
</ol></li>
</ol>
<h2 id="匿名函数lambda-expressions">匿名函数(Lambda Expressions )</h2>
<p>格式：<code>lambda &lt;formal parameter&gt;: &lt;return value&gt;</code></p>
<p>lambda指定义一个匿名函数</p>
<p>lambda后紧跟一个形式参数，冒号后为返回值（无return关键字）</p>
<p><strong>返回值只能是一句表达式</strong></p>
<p>使用时将其赋值给一个变量并按照def函数方式调用或直接按照def函数方式调用</p>
<p>与def不同的一点是：def定义的函数拥有一个内部名称(intrinsic
name)，而lambda定义的函数即使赋值给了另一个名字的变量，它的名称仍为lambda</p>
<h2 id="返回语句return-statements">返回语句(Return Statements)</h2>
<p>函数中的return语句让程序返回到先前的environment，并给函数一个值</p>
<p>在执行函数体时，遇到return语句函数即结束</p>
<p>看如下例子：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">search</span><span style="color: #24292E">(f):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""find a number that one more than the square root of</span></span>
<span class="line"><span style="color: #032F62">    the number put in the positive function</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">search(positive)</span></span>
<span class="line"><span style="color: #032F62">    11</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    x</span><span style="color: #D73A49">=</span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> </span><span style="color: #D73A49">not</span><span style="color: #24292E"> f(x): </span><span style="color: #6A737D"># 当positive函数返回为0时进入循环</span></span>
<span class="line"><span style="color: #24292E">        x</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">square</span><span style="color: #24292E">(x):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> x</span><span style="color: #D73A49">**</span><span style="color: #005CC5">2</span></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">positive</span><span style="color: #24292E">(x):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">max</span><span style="color: #24292E">(</span><span style="color: #005CC5">0</span><span style="color: #24292E">,square(x)</span><span style="color: #D73A49">-</span><span style="color: #005CC5">100</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">inverse</span><span style="color: #24292E">(f):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""return g(y) such that g(f(x)) -&gt;x</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">inverse(square)(16)</span></span>
<span class="line"><span style="color: #032F62">    4</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #D73A49">lambda</span><span style="color: #24292E"> y: search(</span><span style="color: #D73A49">lambda</span><span style="color: #24292E"> x:f(x)</span><span style="color: #D73A49">==</span><span style="color: #24292E">y) </span><span style="color: #6A737D"># 返回某个完全平方数的平方根</span></span></code></pre></div></div></figure>
<ul>
<li>positive函数：</li>
</ul>
<p>​ 传入search后，寻找的是第一个比positive函数中减数的平方根大的数</p>
<p>​
因为若数x的平方比减数小，return值肯定是0，while条件成立，x++继续寻找</p>
<ul>
<li><p>inverse函数：</p>
<p>inverse用于寻找完全平方数y的平方根</p>
<p>传入square函数用于计算search函数中x的平方，与inverse函数返回的lambda函数中传入的y比较是否相等，若不相等，满足while循环条件，x++继续比较，若相等则找到，跳出循环返回此时x值。</p></li>
</ul>
<h2 id="控制语句control-statements">控制语句(Control Statements)</h2>
<h3 id="条件语句">条件语句</h3>
<p>执行条件：每一句clause按序执行</p>
<ol type="1">
<li>判断条件判断语句是否成立（若存在）</li>
<li>若值为true或遇到else的clause，执行语句块并跳过其余clauses</li>
</ol>
<p>但为何没有一个函数能实现条件判断呢？</p>
<p>对于调用表达式(call expression)的执行如下：</p>
<img src="/CS61A/CS61A%E2%80%94%E2%80%94Higher-order%20Functions/image-20250118151740899.png" class="" title="调用表达式的执行">
<p>而在if语句中，只有其中一句会被执行，因此使用函数替代并不合适，如下代码：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">if_</span><span style="color: #24292E">(c,t,f):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> c:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> t</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> f</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">from</span><span style="color: #24292E"> math </span><span style="color: #D73A49">import</span><span style="color: #24292E"> sqrt</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">real_sqrt</span><span style="color: #24292E">(x):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> if_(x</span><span style="color: #D73A49">&gt;</span><span style="color: #005CC5">0</span><span style="color: #24292E">,sqrt(x),</span><span style="color: #005CC5">0.0</span><span style="color: #24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">__name__</span><span style="color: #24292E"> </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #032F62">'__main__'</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">print</span><span style="color: #24292E">(real_sqrt(</span><span style="color: #D73A49">-</span><span style="color: #005CC5">4</span><span style="color: #24292E">))</span></span></code></pre></div></div></figure>
<p>我们需要实现返回一个实数平方根结果的实部，众所周知，负数开平方后实部为0，因此负数应输出0</p>
<p>但执行后发现却出现了sqrt的 ValueError: math domain error</p>
<p>因为在函数调用时，sqrt(x)同时也会执行，此时x小于0故触发了sqrt的assert</p>
<p>因此没有了控制语句，我们只能在值之间选择而不能在条件之间选择</p>
<h4 id="条件语句的简单形式">条件语句的简单形式</h4>
<p><code>&lt;consequent&gt; if &lt;predicate&gt; else &lt;alternative&gt;</code></p>
<ol type="1">
<li>执行predicate语句</li>
<li>若为真，则整个表达式的值为consequent的值</li>
<li>若为假，则整个表达式的值为alternative的值</li>
</ol>
<h3 id="逻辑运算符的短路效应">逻辑运算符的短路效应</h3>
<p>执行一个语句<code>&lt;left&gt; and &lt;right&gt;</code></p>
<ol type="1">
<li>计算left语句</li>
<li>若结果是false，则整个表达式的结果是false</li>
<li>若结果是true，则整个表达式的结果是right语句的结果</li>
</ol>
<p>执行一个语句<code>&lt;left&gt; or &lt;right&gt;</code></p>
<ol type="1">
<li>计算left语句</li>
<li>若结果为true，则整个表达式的结果是true</li>
<li>若结果为false，则整个表达式的结果是right语句的结果</li>
</ol>
<h1 id="hw">HW</h1>
<p>Lecture4的作业部分</p>
<h2 id="柯里化currying">柯里化(Currying)</h2>
<p>定义：柯里化（Currying）是一种处理多元函数的方法。它产生一系列连锁函数，其中每个函数固定部分参数，并返回一个新函数，用于传回其它剩余参数的功能。</p>
<p><strong>即它可以把一个多元函数转换为一系列函数，每个函数传入一个参数，即将f(a,b,c)转换为f(a)(b)(c)</strong></p>
<p>如上文中的<code>makeadder</code>函数，返回的是在内部定义的adder函数，每个函数接受一个参数，等同于makeadder(k,n)</p>
<p>柯里化是函数式编程的一个体现，使得函数代码更简洁</p>
<h2 id="product">1-Product</h2>
<p>My solution:</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">x </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">re </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #D73A49">while</span><span style="color: #24292E"> x</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n:</span></span>
<span class="line"><span style="color: #24292E">    re</span><span style="color: #D73A49">*=</span><span style="color: #24292E">term(x)</span></span>
<span class="line"><span style="color: #24292E">    x</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #D73A49">return</span><span style="color: #24292E"> re</span></span></code></pre></div></div></figure>
<p>product函数有一个term参数用于接收函数，根据不同计算需要可以传入不同计算相关函数(square，identity等)</p>
<h2 id="accumulate">2- Accumulate</h2>
<p>My solution:</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">a</span><span style="color: #D73A49">=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">   re</span><span style="color: #D73A49">=</span><span style="color: #24292E">start</span></span>
<span class="line"><span style="color: #24292E">   </span><span style="color: #D73A49">while</span><span style="color: #24292E"> a</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n:</span></span>
<span class="line"><span style="color: #24292E">       re </span><span style="color: #D73A49">=</span><span style="color: #24292E"> fuse(re,term(a))</span></span>
<span class="line"><span style="color: #24292E">       a</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">   </span><span style="color: #D73A49">return</span><span style="color: #24292E"> re</span></span></code></pre></div></div></figure>
<hr>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">return</span><span style="color: #24292E"> accumulate(add, </span><span style="color: #005CC5">0</span><span style="color: #24292E">, n, term)</span></span></code></pre></div></div></figure>
<hr>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">return</span><span style="color: #24292E"> accumulate(mul, </span><span style="color: #005CC5">1</span><span style="color: #24292E">, n, term)</span></span></code></pre></div></div></figure>
<p>在上一题的基础上添加了选择每个数之间使用加法还是乘法的参数fuse，fuse同时也是接收函数来指定每个term运算之间的运算方式(add,mul
等)</p>
<h2 id="make-repeater">3-Make repeater</h2>
<p>My solution:</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">if</span><span style="color: #24292E"> n </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">: </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #D73A49">lambda</span><span style="color: #24292E"> x: x</span></span>
<span class="line"><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #D73A49">lambda</span><span style="color: #24292E"> x: f(make_repeater(f,n</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">)(x))</span></span></code></pre></div></div></figure>
<p>这里需要将传入的数值执行n次指定运算f，即<code>f(f(...f(x)...))</code></p>
<p>本人使用了递归实现，即<code>make_repeater(f,n)(x)=f(make_repeater(f,n-1)(x))=f(f(make_repeater(f,n-2)))=...=f(f(...f(x)...))</code></p>
<p>每次加一层f()，直到<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="5.506ex" height="1.692ex" role="img" focusable="false" viewBox="0 -666 2433.6 748"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(877.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1933.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container></span>时替换为x</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
              <a href="/tags/CS61A/" rel="tag"># CS61A</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/C++/%E6%8C%87%E9%92%88/" rel="prev" title="【C&#x2F;C++】指针">
                  <i class="fa fa-angle-left"></i> 【C/C++】指针
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97(priority_queue)/" rel="next" title="【数据结构】优先队列">
                  【数据结构】优先队列 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">IzayoiSakuye</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

<!-- hexo injector body_end start -->
<script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script>

  <script>
  const CODE_CONFIG = {
    beautify: true,
    highlightCopy: true,
    highlightLang: true,
    highlightHeightLimit: undefined,
    isHighlightShrink: false,
    copy: {
      success: 'Copy Success',
      error: 'Copy Error',
      noSupport: 'Browser Not Support',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body>
</html>
