<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"izayoisakuye.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.23.2","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":false,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="红魔咖啡馆">
<meta property="og:url" content="https://izayoisakuye.github.io/list/page/7/index.html">
<meta property="og:site_name" content="红魔咖啡馆">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="IzayoiSakuye">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://izayoisakuye.github.io/list/page/7/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"list/page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>红魔咖啡馆</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#90a4ae;--hl-bg:#f6f8fa;--hltools-bg:#e6ebf1;--hltools-color:#90a4ae;--hlnumber-bg:#f6f8fa;--hlnumber-color:rgba(144,164,174,0.5);--hlscrollbar-bg:#dce4eb;--hlexpand-bg:linear-gradient(180deg,rgba(246,248,250,0.1),rgba(246,248,250,0.9))}</style><!-- hexo injector head_end end --><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">红魔咖啡馆</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">头发越掉越多，头发越掉越少</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">21</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">6</span></a></li><li class="menu-item menu-item-passages"><a href="/list/" rel="section"><i class="fa-regular fa-file fa-fw"></i>文章</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="IzayoiSakuye"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">IzayoiSakuye</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">103</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Decomposition/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Decomposition/" class="post-title-link" itemprop="url">【CS61A】CS61A——Decomposition</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-05-18 21:40:12" itemprop="dateCreated datePublished" datetime="2025-05-18T21:40:12+08:00">2025-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:49:16" itemprop="dateModified" datetime="2025-07-31T17:49:16+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="decomposition">Decomposition</h1>
<h2 id="modular-design">Modular Design</h2>
<p>程序的设计原则：将程序的不同部分分离开来，使得每个模块可以独立开发与测试
以以下餐厅搜索代码为例，实现从文件中读取评分与评论（使用<code>similarity</code>评估相似性）搜索对应评分前k个餐厅去过的其他餐厅的功能：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">search</span><span style="color: #24292E">(query, ranking </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">lambda</span><span style="color: #24292E"> r: </span><span style="color: #D73A49">-</span><span style="color: #24292E">r.stars):</span></span>
<span class="line"><span style="color: #24292E">    results  </span><span style="color: #D73A49">=</span><span style="color: #24292E">[r </span><span style="color: #D73A49">for</span><span style="color: #24292E"> r </span><span style="color: #D73A49">in</span><span style="color: #24292E"> Restaurant.all </span><span style="color: #D73A49">if</span><span style="color: #24292E"> query </span><span style="color: #D73A49">in</span><span style="color: #24292E"> r.name]</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">sorted</span><span style="color: #24292E">(results, </span><span style="color: #E36209">key</span><span style="color: #D73A49">=</span><span style="color: #24292E"> ranking)</span></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">reviewed_both</span><span style="color: #24292E">(r, s):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">len</span><span style="color: #24292E">([x </span><span style="color: #D73A49">for</span><span style="color: #24292E"> x </span><span style="color: #D73A49">in</span><span style="color: #24292E"> r.reviewers </span><span style="color: #D73A49">if</span><span style="color: #24292E"> x </span><span style="color: #D73A49">in</span><span style="color: #24292E"> s.reviewers])</span></span>
<span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Restaurant</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">all</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> []</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, name, star, reviewer):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.star </span><span style="color: #D73A49">=</span><span style="color: #24292E"> star</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.reviewer </span><span style="color: #D73A49">=</span><span style="color: #24292E"> reviewer</span></span>
<span class="line"><span style="color: #24292E">        Restaurant.all.append(</span><span style="color: #005CC5">self</span><span style="color: #24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">similar</span><span style="color: #24292E">(self, k, similarity</span><span style="color: #D73A49">=</span><span style="color: #24292E">reviewed_both):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Return the k most similar restaurants to self"""</span></span>
<span class="line"><span style="color: #24292E">        others </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Restaurant.all</span></span>
<span class="line"><span style="color: #24292E">        others.remove(</span><span style="color: #005CC5">self</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">        different </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">lambda</span><span style="color: #24292E"> r: </span><span style="color: #D73A49">-</span><span style="color: #24292E">similarity(r, </span><span style="color: #005CC5">self</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">sorted</span><span style="color: #24292E">(others, </span><span style="color: #E36209">key</span><span style="color: #D73A49">=</span><span style="color: #24292E">different)[:k]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__repr__</span><span style="color: #24292E">(self):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #032F62">'&lt;'</span><span style="color: #D73A49">+</span><span style="color: #005CC5">self</span><span style="color: #24292E">.name</span><span style="color: #D73A49">+</span><span style="color: #032F62">'&gt;'</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">import</span><span style="color: #24292E"> json</span></span>
<span class="line"><span style="color: #24292E">reviewers_for_restaurant </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {}</span></span>
<span class="line"><span style="color: #D73A49">for</span><span style="color: #24292E"> line </span><span style="color: #D73A49">in</span><span style="color: #24292E"> </span><span style="color: #005CC5">open</span><span style="color: #24292E">(</span><span style="color: #032F62">'reviews.json'</span><span style="color: #24292E">):</span></span>
<span class="line"><span style="color: #24292E">    r </span><span style="color: #D73A49">=</span><span style="color: #24292E"> json.loads(line)</span></span>
<span class="line"><span style="color: #24292E">    biz </span><span style="color: #D73A49">=</span><span style="color: #24292E"> r[</span><span style="color: #032F62">'business_id'</span><span style="color: #24292E">]</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> biz </span><span style="color: #D73A49">not</span><span style="color: #24292E"> </span><span style="color: #D73A49">in</span><span style="color: #24292E"> reviewers_for_restaurant:</span></span>
<span class="line"><span style="color: #24292E">        reviewers_for_restaurant[biz] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [r[</span><span style="color: #032F62">'user_id'</span><span style="color: #24292E">]]</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        reviewers_for_restaurant[biz].append(r[</span><span style="color: #032F62">'user_id'</span><span style="color: #24292E">])</span></span>
<span class="line"><span style="color: #D73A49">for</span><span style="color: #24292E"> line </span><span style="color: #D73A49">in</span><span style="color: #24292E"> </span><span style="color: #005CC5">open</span><span style="color: #24292E">(</span><span style="color: #032F62">'restaurant.json'</span><span style="color: #24292E">):</span></span>
<span class="line"><span style="color: #24292E">    r </span><span style="color: #D73A49">=</span><span style="color: #24292E"> json.loads(line)</span></span>
<span class="line"><span style="color: #24292E">    reviewers </span><span style="color: #D73A49">=</span><span style="color: #24292E"> reviewers_for_restaurant[r[</span><span style="color: #032F62">'business_id'</span><span style="color: #24292E">]]</span></span>
<span class="line"><span style="color: #24292E">    Restaurant(r[</span><span style="color: #032F62">'name'</span><span style="color: #24292E">], r[</span><span style="color: #032F62">'stars'</span><span style="color: #24292E">], reviewers)</span></span>
<span class="line"><span style="color: #24292E">results </span><span style="color: #D73A49">=</span><span style="color: #24292E"> search(</span><span style="color: #032F62">'Thai'</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #D73A49">for</span><span style="color: #24292E"> r </span><span style="color: #D73A49">in</span><span style="color: #24292E"> results:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">print</span><span style="color: #24292E">(r,</span><span style="color: #032F62">'share reviewer with'</span><span style="color: #24292E">, r.similar(</span><span style="color: #005CC5">3</span><span style="color: #24292E">))</span></span></code></pre></div></div></figure>
<h2 id="优化时间复杂度">优化时间复杂度</h2>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">reviewed_both</span><span style="color: #24292E">(r, s):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> fast_overlap(r.reviewers, s.reviewers)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">fast_overlap</span><span style="color: #24292E">(s, t):</span></span>
<span class="line"><span style="color: #24292E">    count, i, j </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">, </span><span style="color: #005CC5">0</span><span style="color: #24292E">, </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> i</span><span style="color: #D73A49">&lt;</span><span style="color: #005CC5">len</span><span style="color: #24292E">(s) </span><span style="color: #D73A49">and</span><span style="color: #24292E"> j</span><span style="color: #D73A49">&lt;</span><span style="color: #005CC5">len</span><span style="color: #24292E">(t):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> s[i]</span><span style="color: #D73A49">==</span><span style="color: #24292E">t[j]:</span></span>
<span class="line"><span style="color: #24292E">            count, i, j </span><span style="color: #D73A49">=</span><span style="color: #24292E"> count</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">, i</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">, j</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #B31D28; font-style: italic">;</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">elif</span><span style="color: #24292E"> s[i]</span><span style="color: #D73A49">&lt;</span><span style="color: #24292E">t[i]:</span></span>
<span class="line"><span style="color: #24292E">            i</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">            j</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> count</span></span></code></pre></div></div></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/" class="post-title-link" itemprop="url">【图论】邻接表</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-04-13 22:13:48" itemprop="dateCreated datePublished" datetime="2025-04-13T22:13:48+08:00">2025-04-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:56:48" itemprop="dateModified" datetime="2025-07-31T17:56:48+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">算法与数据结构</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="邻接矩阵">邻接矩阵</h2>
<p>给如下一个有向图：</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250413211606425.png" class="" title="例图">
<p>该图有四个节点，五条边。右侧表示了有向图的起点，终点以及边权</p>
<p>根据该图建立邻接矩阵：</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250413211803839.png" class="" title="邻接矩阵">
<p>可以发现，邻接矩阵中许多位置并没有使用，故浪费了空间与时间</p>
<h2 id="邻接表">邻接表</h2>
<p>让起点与终点直接相连，而不考虑先后顺序</p>
<p>将终点和边权作为一个节点，按头插法插入每个起点位置，就构建了一个邻接表</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250413212746653.png" class="" title="邻接表">
<h3 id="链表实现">链表实现</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">#include</span><span style="color: #24292E"> </span><span style="color: #032F62">&lt;bits/stdc++.h&gt;</span></span>
<span class="line"><span style="color: #D73A49">using</span><span style="color: #24292E"> </span><span style="color: #D73A49">namespace</span><span style="color: #24292E"> </span><span style="color: #6F42C1">std</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #D73A49">struct</span><span style="color: #24292E"> </span><span style="color: #6F42C1">node</span><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> x;</span><span style="color: #6A737D"> // 节点编号</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> w;</span><span style="color: #6A737D"> // 某个顶点到x的权值</span></span>
<span class="line"><span style="color: #24292E">  node</span><span style="color: #D73A49">*</span><span style="color: #24292E"> next;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #6F42C1">node</span><span style="color: #24292E">(</span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">x_</span><span style="color: #24292E">, </span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">w_</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">this</span><span style="color: #24292E">-&gt;x </span><span style="color: #D73A49">=</span><span style="color: #24292E"> x_;</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">this</span><span style="color: #24292E">-&gt;w </span><span style="color: #D73A49">=</span><span style="color: #24292E"> w_;</span></span>
<span class="line"><span style="color: #24292E">    next </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">nullptr</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">};</span></span>
<span class="line"><span style="color: #24292E">vector</span><span style="color: #D73A49">&lt;</span><span style="color: #24292E">node</span><span style="color: #D73A49">*&gt;</span><span style="color: #24292E"> head;</span></span>
<span class="line"><span style="color: #D73A49">void</span><span style="color: #24292E"> </span><span style="color: #6F42C1">add_edge</span><span style="color: #24292E">(</span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">u</span><span style="color: #24292E">, </span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">v</span><span style="color: #24292E">, </span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">w</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  node</span><span style="color: #D73A49">*</span><span style="color: #24292E"> a </span><span style="color: #D73A49">=</span><span style="color: #24292E"> head[u];</span><span style="color: #6A737D"> // 现在的头</span></span>
<span class="line"><span style="color: #24292E">  node</span><span style="color: #D73A49">*</span><span style="color: #24292E"> b </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">node</span><span style="color: #24292E">(v,w);</span><span style="color: #6A737D"> // 建立新的节点</span></span>
<span class="line"><span style="color: #6A737D">  // 头插法</span></span>
<span class="line"><span style="color: #24292E">  b-&gt;next </span><span style="color: #D73A49">=</span><span style="color: #24292E"> a-&gt;next;</span></span>
<span class="line"><span style="color: #24292E">  a-&gt;next </span><span style="color: #D73A49">=</span><span style="color: #24292E"> b;</span></span>
<span class="line"><span style="color: #24292E">}</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">main</span><span style="color: #24292E">(){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> n, m;</span></span>
<span class="line"><span style="color: #24292E">  cin </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> n </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> m;</span></span>
<span class="line"><span style="color: #24292E">  head.</span><span style="color: #6F42C1">resize</span><span style="color: #24292E">(n</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">for</span><span style="color: #24292E">(</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n;i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    head[i] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">node</span><span style="color: #24292E">(i,</span><span style="color: #005CC5">0</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">; i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">m;i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">int</span><span style="color: #24292E"> u,v,w;</span></span>
<span class="line"><span style="color: #24292E">    cin </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> u </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> v </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> w;</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6F42C1">add_edge</span><span style="color: #24292E">(u,v,w);</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #6A737D">  // 遍历</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n;i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    node</span><span style="color: #D73A49">*</span><span style="color: #24292E"> p </span><span style="color: #D73A49">=</span><span style="color: #24292E"> head[i]-&gt;next;</span><span style="color: #6A737D"> // 从某个节点开始，指向其相邻节点并输出</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E">(p){</span></span>
<span class="line"><span style="color: #6A737D">      // 起点总是i，而i连接的所有节点均为其兄弟</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #6F42C1">printf</span><span style="color: #24292E">(</span><span style="color: #032F62">"(</span><span style="color: #005CC5">%d</span><span style="color: #032F62">, </span><span style="color: #005CC5">%d</span><span style="color: #032F62">, </span><span style="color: #005CC5">%d</span><span style="color: #032F62">)"</span><span style="color: #24292E">,i,p-&gt;x,p-&gt;w);</span></span>
<span class="line"><span style="color: #24292E">      p </span><span style="color: #D73A49">=</span><span style="color: #24292E"> p-&gt;next;</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">    cout </span><span style="color: #D73A49">&lt;&lt;</span><span style="color: #24292E"> endl;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h3 id="数组实现">数组实现</h3>
<p>建立四个数组</p>
<ul>
<li><code>edge[i]</code>：表示索引为i的边的终点，大小为m</li>
<li><code>next[i]</code>：表示索引为i的边的下一条兄
弟边的索引，大小为m</li>
<li><code>head[i]</code>：表示i的第一条边的索引，大小为n</li>
<li><code>weigh[i]</code>：表示索引为i的权重，大小为m</li>
</ul>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250413215851485.png" class="" title="数组模拟空间">
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">#include</span><span style="color: #24292E"> </span><span style="color: #032F62">&lt;bits/stdc++.h&gt;</span></span>
<span class="line"><span style="color: #D73A49">using</span><span style="color: #24292E"> </span><span style="color: #D73A49">namespace</span><span style="color: #24292E"> </span><span style="color: #6F42C1">std</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">vector</span><span style="color: #D73A49">&lt;int&gt;</span><span style="color: #24292E"> head, edge, Next, weight;</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> idx </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span><span style="color: #6A737D"> // 表示边的索引</span></span>
<span class="line"><span style="color: #D73A49">void</span><span style="color: #24292E"> </span><span style="color: #6F42C1">add_edge</span><span style="color: #24292E">(</span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">u</span><span style="color: #24292E">, </span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">v</span><span style="color: #24292E">, </span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">w</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  edge[idx] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> v;</span></span>
<span class="line"><span style="color: #24292E">  weight[idx]</span><span style="color: #D73A49">=</span><span style="color: #24292E"> w;</span></span>
<span class="line"><span style="color: #24292E">  Next[idx] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> head[u];</span></span>
<span class="line"><span style="color: #24292E">  head[u]</span><span style="color: #D73A49">=</span><span style="color: #24292E">idx</span><span style="color: #D73A49">++</span><span style="color: #24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">}</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">main</span><span style="color: #24292E">(){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> n, m;</span></span>
<span class="line"><span style="color: #24292E">  cin </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> n </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> m;</span></span>
<span class="line"><span style="color: #24292E">  head.</span><span style="color: #6F42C1">resize</span><span style="color: #24292E">(n</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">,</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  edge.</span><span style="color: #6F42C1">resize</span><span style="color: #24292E">(m</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  Next.</span><span style="color: #6F42C1">resize</span><span style="color: #24292E">(m</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  weight.</span><span style="color: #6F42C1">resize</span><span style="color: #24292E">(m</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">; i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">m;i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">int</span><span style="color: #24292E"> u,v,w;</span></span>
<span class="line"><span style="color: #24292E">    cin </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> u </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> v </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> w;</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6F42C1">add_edge</span><span style="color: #24292E">(u,v,w);</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #6A737D">  // 遍历</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n;i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> j </span><span style="color: #D73A49">=</span><span style="color: #24292E"> head[i]; </span><span style="color: #D73A49">~</span><span style="color: #24292E">j; j</span><span style="color: #D73A49">=</span><span style="color: #24292E">Next[j]){</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #D73A49">int</span><span style="color: #24292E"> u </span><span style="color: #D73A49">=</span><span style="color: #24292E"> i;</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #D73A49">int</span><span style="color: #24292E"> v </span><span style="color: #D73A49">=</span><span style="color: #24292E"> edge[j];</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #D73A49">int</span><span style="color: #24292E"> w </span><span style="color: #D73A49">=</span><span style="color: #24292E"> weight[j];</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #6F42C1">printf</span><span style="color: #24292E">(</span><span style="color: #032F62">"(</span><span style="color: #005CC5">%d</span><span style="color: #032F62">, </span><span style="color: #005CC5">%d</span><span style="color: #032F62">, </span><span style="color: #005CC5">%d</span><span style="color: #032F62">)"</span><span style="color: #24292E">, u, v, w);</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">    cout </span><span style="color: #D73A49">&lt;&lt;</span><span style="color: #24292E"> endl;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h2 id="链式前向星">链式前向星</h2>
<h3 id="图的多种表示">图的多种表示</h3>
<ol type="1">
<li>输入数据模式</li>
</ol>
<figure class="shiki"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292e">4 5</span></span>
<span class="line"><span style="color: #24292e">1 4 9</span></span>
<span class="line"><span style="color: #24292e">4 3 8</span></span>
<span class="line"><span style="color: #24292e">1 2 5</span></span>
<span class="line"><span style="color: #24292e">2 4 6</span></span>
<span class="line"><span style="color: #24292e">1 3 7</span></span></code></pre></div></div></figure>
<ol start="2" type="1">
<li>平面图</li>
<li>邻接矩阵</li>
<li>邻接表</li>
</ol>
<h3 id="数组实现-1">数组实现</h3>
<p>用一个数组与一个结构体：</p>
<ul>
<li>head数组，大小为顶点个数，保存边的下标，初始化为-1，表示从i出发没有边</li>
<li>edge结构体，大小为边个数，元素表示终点、距离与下一条边的位置</li>
</ul>
<p>如输入1 4 9，表示从1出发，终点为4，距离为9</p>
<p>检查是否有从1出发的边，没有(-1)，next改为-1，此时第一条边从1出发，将<code>head[1]=1</code></p>
<p>再输入4 3 8</p>
<p>检查是否有从4出发的边，没有(-1)，next改为-1，此时第二条边从4出发，将<code>head[4]=2</code></p>
<p>再输入1 2 5</p>
<p>检查是否有从1出发的边，<code>head[1]=1</code>，next改为1，此时第三条边也从1出发，将<code>head[1]=3</code></p>
<p>再输入2 4 6</p>
<p>检查是否有从2出发的边，没有(-1)，next改为-1，此时第四条边从2出发，将<code>head[2]=4</code></p>
<p>再输入1 3 7</p>
<p>检查是否有从1出发的边，<code>head[1]=3</code>，next改为3，此时第五条边也从1出发，将<code>head[1]=5</code></p>
<p>最终为<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250417213030565.png" class="" title="前向星后"></p>
<p><strong>即实现了头插法</strong></p>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">#include</span><span style="color: #24292E"> </span><span style="color: #032F62">&lt;bits/stdc++.h&gt;</span></span>
<span class="line"><span style="color: #D73A49">#define</span><span style="color: #24292E"> </span><span style="color: #6F42C1">endl</span><span style="color: #24292E"> '\n'</span></span>
<span class="line"><span style="color: #D73A49">using</span><span style="color: #24292E"> </span><span style="color: #D73A49">namespace</span><span style="color: #24292E"> </span><span style="color: #6F42C1">std</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">long</span><span style="color: #24292E"> </span><span style="color: #D73A49">long</span><span style="color: #24292E"> ll;</span></span>
<span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> pair</span><span style="color: #D73A49">&lt;int</span><span style="color: #24292E">,</span><span style="color: #D73A49">int&gt;</span><span style="color: #24292E"> PII;</span></span>
<span class="line"><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #D73A49">int</span><span style="color: #24292E"> N </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">2</span><span style="color: #D73A49">e</span><span style="color: #005CC5">5</span><span style="color: #24292E"> </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">10</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #D73A49">int</span><span style="color: #24292E"> mod </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #D73A49">e</span><span style="color: #005CC5">9</span><span style="color: #24292E"> </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">7</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> n, m, s, u, v, w, cnt;</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> head[</span><span style="color: #005CC5">100005</span><span style="color: #24292E">];</span></span>
<span class="line"><span style="color: #D73A49">struct</span><span style="color: #24292E"> </span><span style="color: #6F42C1">edge</span><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> to, dis, nxt;</span></span>
<span class="line"><span style="color: #24292E">}edge[</span><span style="color: #005CC5">200005</span><span style="color: #24292E">];</span></span>
<span class="line"><span style="color: #D73A49">void</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Add_edge</span><span style="color: #24292E">(</span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">from</span><span style="color: #24292E">, </span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">to</span><span style="color: #24292E">, </span><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #E36209">w</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  edge[</span><span style="color: #D73A49">++</span><span style="color: #24292E">cnt].to </span><span style="color: #D73A49">=</span><span style="color: #24292E"> to;</span></span>
<span class="line"><span style="color: #24292E">  edge[cnt].dis </span><span style="color: #D73A49">=</span><span style="color: #24292E"> w;</span></span>
<span class="line"><span style="color: #24292E">  edge[cnt].nxt </span><span style="color: #D73A49">=</span><span style="color: #24292E"> head[from];</span></span>
<span class="line"><span style="color: #24292E">  head[from]</span><span style="color: #D73A49">=</span><span style="color: #24292E">cnt;</span></span>
<span class="line"><span style="color: #24292E">}</span></span>
<span class="line"><span style="color: #D73A49">void</span><span style="color: #24292E"> </span><span style="color: #6F42C1">solve</span><span style="color: #24292E">() {</span></span>
<span class="line"><span style="color: #24292E">  cin </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> n </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> m;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #6F42C1">fill</span><span style="color: #24292E">(head, head</span><span style="color: #D73A49">+</span><span style="color: #24292E">n</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">,</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n;i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    cin </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> u </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> v </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> w;</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6F42C1">Add_edge</span><span style="color: #24292E">(u,v,w);</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #6A737D">  // 遍历</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">n;i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> k </span><span style="color: #D73A49">=</span><span style="color: #24292E"> head[i];</span><span style="color: #D73A49">~</span><span style="color: #24292E">k;k </span><span style="color: #D73A49">=</span><span style="color: #24292E"> edge[k].nxt){</span></span>
<span class="line"><span style="color: #6A737D">      /*具体处理*/</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span></span>
<span class="line"><span style="color: #24292E">}</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">main</span><span style="color: #24292E">()</span></span>
<span class="line"><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #6F42C1">ios</span><span style="color: #24292E">::</span><span style="color: #6F42C1">sync_with_stdio</span><span style="color: #24292E">(</span><span style="color: #005CC5">0</span><span style="color: #24292E">); cin.</span><span style="color: #6F42C1">tie</span><span style="color: #24292E">(</span><span style="color: #005CC5">0</span><span style="color: #24292E">); cout.</span><span style="color: #6F42C1">tie</span><span style="color: #24292E">(</span><span style="color: #005CC5">0</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> tomorin</span><span style="color: #D73A49">=</span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  cin </span><span style="color: #D73A49">&gt;&gt;</span><span style="color: #24292E"> tomorin;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">while</span><span style="color: #24292E"> (tomorin</span><span style="color: #D73A49">--</span><span style="color: #24292E">) </span><span style="color: #6F42C1">solve</span><span style="color: #24292E">();</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h2 id="十字链表">十字链表</h2>
<p>十字链表分为两部分：</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250418204334524.png" class="" title="顶点节点">
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250418204348032.png" class="" title="弧节点">
<p>顶点节点存储权值、入度(firstIn)与出度(firstOut)；弧节点存储弧尾顶点在顶点数组中的位置(tailVex)，弧头顶点在顶点数组中的位置(headVex)，指向弧头相同的下一条弧(hLink)，指向弧尾相同的下一条弧(tLink)与边权(Info)</p>
<p>每个节点组成了两个链表：以当前节点为弧头的弧组成的链表、以当前节点为弧尾的弧组成的链表</p>
<p>在寻找时<strong>自己找自己</strong>，即若为弧头组成链表，则依次寻找弧头相同的组成链表(firstIn-&gt;headVex)；若为弧尾组成链表，则依次寻找弧尾相同的组成链表(firstOut-&gt;tailVex)</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250418215525320.png" class="" title="十字链表">
<h2 id="邻接多重表">邻接多重表</h2>
<p>邻接多重表分为两部分：</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250418220625498.png" class="" title="邻接多重表">
<p>顶点节点存储权值与指向的第一条跟该顶点有关系的边</p>
<p>表节点：</p>
<ul>
<li>mark：标志域，标记某节点是否已经被操作过，例如遍历各节点时，为0表示还未遍历，为1表示遍历过</li>
<li>ivex与jvex：表示节点表示的边两端的顶点在数组中的位置下标</li>
<li>ilink与jlink：表示指向下一条与ivex，jvex相关的边</li>
<li>info：边的权值</li>
</ul>
<p>邻接多重表也遵循<strong>自己找自己</strong>，但比起十字链表更加灵活（两节点位置可互换），思路与十字链表类似</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8/image-20250418221004833.png" class="" title="邻接多重表">

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Homework5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Homework5/" class="post-title-link" itemprop="url">【CS61A】CS61A——Homework 5</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-04-04 10:35:57" itemprop="dateCreated datePublished" datetime="2025-04-04T10:35:57+08:00">2025-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:50:39" itemprop="dateModified" datetime="2025-07-31T17:50:39+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="homework-5">Homework 5</h1>
<h2 id="q1-infinite-hailstone">Q1: Infinite Hailstone</h2>
<p>写一个生成器函数来生成从n开始的冰雹猜想序列，当到达序列尾后，生成器会一直声称1</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">hailstone</span><span style="color: #24292E">(n):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Q1: Yields the elements of the hailstone sequence starting at n.</span></span>
<span class="line"><span style="color: #032F62">       At the end of the sequence, yield 1 infinitely.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">hail_gen = hailstone(10)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">[next(hail_gen) for _ in range(10)]</span></span>
<span class="line"><span style="color: #032F62">    [10, 5, 16, 8, 4, 2, 1, 1, 1, 1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">next(hail_gen)</span></span>
<span class="line"><span style="color: #032F62">    1</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> n</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> n</span><span style="color: #D73A49">==</span><span style="color: #005CC5">1</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        n</span><span style="color: #D73A49">=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">elif</span><span style="color: #24292E"> n</span><span style="color: #D73A49">%</span><span style="color: #005CC5">2</span><span style="color: #D73A49">==</span><span style="color: #005CC5">0</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        n</span><span style="color: #D73A49">=</span><span style="color: #005CC5">int</span><span style="color: #24292E">(n</span><span style="color: #D73A49">/</span><span style="color: #005CC5">2</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        n</span><span style="color: #D73A49">=</span><span style="color: #005CC5">3</span><span style="color: #D73A49">*</span><span style="color: #24292E">n</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">yield from</span><span style="color: #24292E"> hailstone(n)</span></span></code></pre></div></div></figure>
<p>使用递归，结合yield from生成迭代器</p>
<h2 id="q2-merge">Q2: Merge</h2>
<p>写一个merge函数，传入两个无限生成器a,b按照给定起始位置与步长生成非重复上升序列，返回一个生成器包含两个生成器中的所有元素，且去重</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">merge</span><span style="color: #24292E">(a, b):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Q2:</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">def sequence(start, step):</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">... </span><span style="color: #032F62">    while True:</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">... </span><span style="color: #032F62">        yield start</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">... </span><span style="color: #032F62">        start += step</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a = sequence(2, 3) # 2, 5, 8, 11, 14, ...</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b = sequence(3, 2) # 3, 5, 7, 9, 11, 13, 15, ...</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">result = merge(a, b) # 2, 3, 5, 7, 8, 9, 11, 13, 14, 15</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">[next(result) for _ in range(10)]</span></span>
<span class="line"><span style="color: #032F62">    [2, 3, 5, 7, 8, 9, 11, 13, 14, 15]</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    gene_a </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(a)</span></span>
<span class="line"><span style="color: #24292E">    gene_b </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(b)</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> </span><span style="color: #005CC5">True</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> gene_a </span><span style="color: #D73A49">==</span><span style="color: #24292E"> gene_b:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> gene_a</span></span>
<span class="line"><span style="color: #24292E">            gene_a </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(a)</span></span>
<span class="line"><span style="color: #24292E">            gene_b </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(b)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">elif</span><span style="color: #24292E"> gene_a</span><span style="color: #D73A49">&gt;</span><span style="color: #24292E"> gene_b:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> gene_b</span></span>
<span class="line"><span style="color: #24292E">            gene_b </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(b)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> gene_a</span></span>
<span class="line"><span style="color: #24292E">            gene_a </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(a)</span></span></code></pre></div></div></figure>
<h2 id="q3-yield-paths">Q3: Yield Paths</h2>
<p>定义一个生成器函数，传入一棵树与一个值v，返回生成器从树的根到含有v的节点的每一条路径</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">yield_paths</span><span style="color: #24292E">(t, value):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Q4: Yields all possible paths from the root of t to a node with the label</span></span>
<span class="line"><span style="color: #032F62">    value as a list.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">t1 = tree(1, [tree(2, [tree(3), tree(4, [tree(6)]), tree(5)]), tree(5)])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">print_tree(t1)</span></span>
<span class="line"><span style="color: #032F62">    1</span></span>
<span class="line"><span style="color: #032F62">      2</span></span>
<span class="line"><span style="color: #032F62">        3</span></span>
<span class="line"><span style="color: #032F62">        4</span></span>
<span class="line"><span style="color: #032F62">          6</span></span>
<span class="line"><span style="color: #032F62">        5</span></span>
<span class="line"><span style="color: #032F62">      5</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">next(yield_paths(t1, 6))</span></span>
<span class="line"><span style="color: #032F62">    [1, 2, 4, 6]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">path_to_5 = yield_paths(t1, 5)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">sorted(list(path_to_5))</span></span>
<span class="line"><span style="color: #032F62">    [[1, 2, 5], [1, 5]]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">t2 = tree(0, [tree(2, [t1])])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">print_tree(t2)</span></span>
<span class="line"><span style="color: #032F62">    0</span></span>
<span class="line"><span style="color: #032F62">      2</span></span>
<span class="line"><span style="color: #032F62">        1</span></span>
<span class="line"><span style="color: #032F62">          2</span></span>
<span class="line"><span style="color: #032F62">            3</span></span>
<span class="line"><span style="color: #032F62">            4</span></span>
<span class="line"><span style="color: #032F62">              6</span></span>
<span class="line"><span style="color: #032F62">            5</span></span>
<span class="line"><span style="color: #032F62">          5</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">path_to_2 = yield_paths(t2, 2)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">sorted(list(path_to_2))</span></span>
<span class="line"><span style="color: #032F62">    [[0, 2], [0, 2, 1, 2]]</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> label(t) </span><span style="color: #D73A49">==</span><span style="color: #24292E"> value:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> [value]</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> b </span><span style="color: #D73A49">in</span><span style="color: #24292E"> branches(t):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">for</span><span style="color: #24292E"> p </span><span style="color: #D73A49">in</span><span style="color: #24292E"> yield_paths(b, value):</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> [label(t)]</span><span style="color: #D73A49">+</span><span style="color: #24292E">p</span></span></code></pre></div></div></figure>
<blockquote>
<p>If our current label is equal to <code>value</code>, we’ve found a
path from the root to a node containing <code>value</code> containing
only our current label, so we should yield that. From there, we’ll see
if there are any paths starting from one of our branches that ends at a
node containing <code>value</code>. If we find these “partial paths” we
can simply add our current label to the beginning of a path to obtain a
path starting from the root.</p>
<p>In order to do this, we’ll create a generator for each of the
branches which yields these “partial paths”. By calling
<code>yield_paths</code> on each of the branches, we’ll create exactly
this generator! Then, since a generator is also an iterable, we can
iterate over the paths in this generator and yield the result of
concatenating it with our current label.</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Lab5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Lab5/" class="post-title-link" itemprop="url">【CS61A】CS61A——Lab5</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-04-04 10:35:24" itemprop="dateCreated datePublished" datetime="2025-04-04T10:35:24+08:00">2025-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:51:29" itemprop="dateModified" datetime="2025-07-31T17:51:29+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><em>WWPD部分省略</em></p>
<h1 id="q2-insert-items">Q2: Insert Items</h1>
<p>实现一个函数，传入列表，一个值<code>before</code>，一个值<code>after</code>，在列表中每个等于<code>before</code>的之后插入<code>after</code></p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">insert_items</span><span style="color: #24292E">(s, before, after):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Insert after into s after each occurrence of before and then return s.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">test_s = [1, 5, 8, 5, 2, 3]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">new_s = insert_items(test_s, 5, 7)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">new_s</span></span>
<span class="line"><span style="color: #032F62">    [1, 5, 7, 8, 5, 7, 2, 3]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">test_s</span></span>
<span class="line"><span style="color: #032F62">    [1, 5, 7, 8, 5, 7, 2, 3]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">new_s is test_s</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">double_s = [1, 2, 1, 2, 3, 3]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">double_s = insert_items(double_s, 3, 4)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">double_s</span></span>
<span class="line"><span style="color: #032F62">    [1, 2, 1, 2, 3, 4, 3, 4]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">large_s = [1, 4, 8]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">large_s2 = insert_items(large_s, 4, 4)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">large_s2</span></span>
<span class="line"><span style="color: #032F62">    [1, 4, 4, 8]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">large_s3 = insert_items(large_s2, 4, 6)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">large_s3</span></span>
<span class="line"><span style="color: #032F62">    [1, 4, 6, 4, 6, 8]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">large_s3 is large_s</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    idx </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> idx</span><span style="color: #D73A49">&lt;</span><span style="color: #005CC5">len</span><span style="color: #24292E">(s):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> s[idx]</span><span style="color: #D73A49">==</span><span style="color: #24292E">before:</span></span>
<span class="line"><span style="color: #24292E">            s.insert(idx</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">,after)</span></span>
<span class="line"><span style="color: #24292E">            idx</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        idx</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> s</span></span></code></pre></div></div></figure>
<p>注意：</p>
<ul>
<li>在<code>before==after</code>时，可能会一直在相同元素后添加相同元素，导致死循环</li>
<li>需要在每次相等时手动让idx向后移动一位</li>
<li>且需要判断长度防止死循环</li>
</ul>
<h1 id="q3-group-by">Q3: Group By</h1>
<p>实现函数，传入列表s与函数fn，返回一个字典</p>
<p>字典的值为s的元素，键为fn(e)，且对相同fn(e)的的元素在同一个列表中</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">group_by</span><span style="color: #24292E">(s, fn):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Return a dictionary of lists that together contain the elements of s.</span></span>
<span class="line"><span style="color: #032F62">    The key for each list is the value that fn returns when called on any of the</span></span>
<span class="line"><span style="color: #032F62">    values of that list.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">group_by([12, 23, 14, 45], lambda p: p // 10)</span></span>
<span class="line"><span style="color: #032F62">    {1: [12, 14], 2: [23], 4: [45]}</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">group_by(range(-3, 4), lambda x: x * x)</span></span>
<span class="line"><span style="color: #032F62">    {9: [-3, 3], 4: [-2, 2], 1: [-1, 1], 0: [0]}</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    grouped </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {}</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> val </span><span style="color: #D73A49">in</span><span style="color: #24292E"> s:</span></span>
<span class="line"><span style="color: #24292E">        key </span><span style="color: #D73A49">=</span><span style="color: #24292E"> fn(val)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> key </span><span style="color: #D73A49">in</span><span style="color: #24292E"> grouped:</span></span>
<span class="line"><span style="color: #24292E">            grouped[key].append(val)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">            grouped[key] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [val]</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> grouped</span></span></code></pre></div></div></figure>
<p>遍历s，计算key值，若存在则直接添加到key对应val的列表中，若无则创建列表并填入该值</p>
<h1 id="q5-count-occurrences">Q5: Count Occurrences</h1>
<p>实现一个函数，传入一个迭代器t，整数n和值x，返回前n个t中和x相等的的数值的个数</p>
<blockquote>
<p>注意：在t上调用next n次，确保至少在t中有n个元素</p>
</blockquote>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">count_occurrences</span><span style="color: #24292E">(t, n, x):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Return the number of times that x is equal to one of the</span></span>
<span class="line"><span style="color: #032F62">    first n elements of iterator t.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">count_occurrences(s, 10, 9)</span></span>
<span class="line"><span style="color: #032F62">    3</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">t = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">count_occurrences(t, 3, 10)</span></span>
<span class="line"><span style="color: #032F62">    2</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">u = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">count_occurrences(u, 1, 3)  # Only iterate over 3</span></span>
<span class="line"><span style="color: #032F62">    1</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">count_occurrences(u, 3, 2)  # Only iterate over 2, 2, 2</span></span>
<span class="line"><span style="color: #032F62">    3</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">list(u)                     # Ensure that the iterator has advanced the right amount</span></span>
<span class="line"><span style="color: #032F62">    [1, 2, 1, 4, 4, 5, 5, 5]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">v = iter([4, 1, 6, 6, 7, 7, 6, 6, 2, 2, 2, 5])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">count_occurrences(v, 6, 6)</span></span>
<span class="line"><span style="color: #032F62">    2</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    cnt </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    times </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> cnt</span><span style="color: #D73A49">&lt;</span><span style="color: #24292E">n:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(t)</span><span style="color: #D73A49">==</span><span style="color: #24292E"> x:</span></span>
<span class="line"><span style="color: #24292E">            times</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        cnt</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> times</span></span></code></pre></div></div></figure>
<p>注意提前跳出循环一次，防止迭代器到尾后返回traceback</p>
<h1 id="q6-repeated">Q6: Repeated</h1>
<p>实现函数，传入迭代器t与一个大于1的整数k，返回t中第一个连续出现k次的元素</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">repeated</span><span style="color: #24292E">(t, k):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Return the first value in iterator t that appears k times in a row,</span></span>
<span class="line"><span style="color: #032F62">    calling next on t as few times as possible.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">repeated(s, 2)</span></span>
<span class="line"><span style="color: #032F62">    9</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">t = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">repeated(t, 3)</span></span>
<span class="line"><span style="color: #032F62">    8</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">u = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">repeated(u, 3)</span></span>
<span class="line"><span style="color: #032F62">    2</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">repeated(u, 3)</span></span>
<span class="line"><span style="color: #032F62">    5</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">v = iter([4, 1, 6, 6, 7, 7, 8, 8, 2, 2, 2, 5])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">repeated(v, 3)</span></span>
<span class="line"><span style="color: #032F62">    2</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">assert</span><span style="color: #24292E"> k </span><span style="color: #D73A49">&gt;</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    pre </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    cnt </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> </span><span style="color: #005CC5">True</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        cur </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">next</span><span style="color: #24292E">(t)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> cur </span><span style="color: #D73A49">==</span><span style="color: #24292E"> pre:</span></span>
<span class="line"><span style="color: #24292E">            cnt</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">            cnt</span><span style="color: #D73A49">=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        pre </span><span style="color: #D73A49">=</span><span style="color: #24292E"> cur</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> cnt </span><span style="color: #D73A49">==</span><span style="color: #24292E"> k:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">return</span><span style="color: #24292E"> cur</span></span></code></pre></div></div></figure>
<p>一开始想用两个迭代器，但是不会复制</p>
<p>每次调用迭代器的next值，并保存前一个值，每次比较</p>
<p>若前后相同，则计数重复+1，否则还原为1（自身重复一次）</p>
<h1 id="q7-sprout-leaves">Q7: Sprout Leaves</h1>
<p>传入一颗树，与新的叶子节点，使该树延伸出对应叶子节点，通过print_tree输出</p>
<p>如<code>t = tree(1, [tree(2), tree(3, [tree(4)])])</code></p>
<figure class="shiki"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292e">  1</span></span>
<span class="line"><span style="color: #24292e"> / \</span></span>
<span class="line"><span style="color: #24292e">2   3</span></span>
<span class="line"><span style="color: #24292e">    |</span></span>
<span class="line"><span style="color: #24292e">    4</span></span></code></pre></div></div></figure>
<p>调用<code>sprout_leaves(t, [5, 6])</code>后打印出树如下</p>
<figure class="shiki"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292e">     1</span></span>
<span class="line"><span style="color: #24292e">   /   \</span></span>
<span class="line"><span style="color: #24292e">  2     3</span></span>
<span class="line"><span style="color: #24292e"> / \    |</span></span>
<span class="line"><span style="color: #24292e">5   6   4</span></span>
<span class="line"><span style="color: #24292e">       / \</span></span>
<span class="line"><span style="color: #24292e">      5   6</span></span></code></pre></div></div></figure>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">sprout_leaves</span><span style="color: #24292E">(t, leaves):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Sprout new leaves containing the labels in leaves at each leaf of</span></span>
<span class="line"><span style="color: #032F62">    the original tree t and return the resulting tree.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">t1 = tree(1, [tree(2), tree(3)])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">print_tree(t1)</span></span>
<span class="line"><span style="color: #032F62">    1</span></span>
<span class="line"><span style="color: #032F62">      2</span></span>
<span class="line"><span style="color: #032F62">      3</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">new1 = sprout_leaves(t1, [4, 5])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">print_tree(new1)</span></span>
<span class="line"><span style="color: #032F62">    1</span></span>
<span class="line"><span style="color: #032F62">      2</span></span>
<span class="line"><span style="color: #032F62">        4</span></span>
<span class="line"><span style="color: #032F62">        5</span></span>
<span class="line"><span style="color: #032F62">      3</span></span>
<span class="line"><span style="color: #032F62">        4</span></span>
<span class="line"><span style="color: #032F62">        5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">t2 = tree(1, [tree(2, [tree(3)])])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">print_tree(t2)</span></span>
<span class="line"><span style="color: #032F62">    1</span></span>
<span class="line"><span style="color: #032F62">      2</span></span>
<span class="line"><span style="color: #032F62">        3</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">new2 = sprout_leaves(t2, [6, 1, 2])</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">print_tree(new2)</span></span>
<span class="line"><span style="color: #032F62">    1</span></span>
<span class="line"><span style="color: #032F62">      2</span></span>
<span class="line"><span style="color: #032F62">        3</span></span>
<span class="line"><span style="color: #032F62">          6</span></span>
<span class="line"><span style="color: #032F62">          1</span></span>
<span class="line"><span style="color: #032F62">          2</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> is_leaf(t):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> tree(label(t), [tree(leaf) </span><span style="color: #D73A49">for</span><span style="color: #24292E"> leaf </span><span style="color: #D73A49">in</span><span style="color: #24292E"> leaves])</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> tree(label(t), [sprout_leaves(s, leaves) </span><span style="color: #D73A49">for</span><span style="color: #24292E"> s </span><span style="color: #D73A49">in</span><span style="color: #24292E"> branches(t)])</span></span></code></pre></div></div></figure>
<h1 id="q8-partial-reverse">Q8: Partial Reverse</h1>
<p>实现函数，传入列表s与起始元素start，将start到列表末尾的元素反转</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">partial_reverse</span><span style="color: #24292E">(s, start):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Reverse part of a list in-place, starting with start up to the end of</span></span>
<span class="line"><span style="color: #032F62">    the list.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a = [1, 2, 3, 4, 5, 6, 7]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">partial_reverse(a, 2)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a</span></span>
<span class="line"><span style="color: #032F62">    [1, 2, 7, 6, 5, 4, 3]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">partial_reverse(a, 5)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a</span></span>
<span class="line"><span style="color: #032F62">    [1, 2, 7, 6, 5, 3, 4]</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    end </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">len</span><span style="color: #24292E">(s)</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> start </span><span style="color: #D73A49">&lt;</span><span style="color: #24292E"> end:</span></span>
<span class="line"><span style="color: #24292E">        s[start], s[end] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> s[end], s[start]</span></span>
<span class="line"><span style="color: #24292E">        start</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        end</span><span style="color: #D73A49">-=</span><span style="color: #005CC5">1</span></span></code></pre></div></div></figure>
<p>使用序列解包，交换两个元素可以通过<code>a,b=b,a</code>实现</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Lab6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Lab6/" class="post-title-link" itemprop="url">【CS61A】CS61A——Lab6</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-04-04 10:35:08" itemprop="dateCreated datePublished" datetime="2025-04-04T10:35:08+08:00">2025-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:51:36" itemprop="dateModified" datetime="2025-07-31T17:51:36+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="lab-6">Lab 6</h1>
<h2 id="q1-bank-account">Q1: Bank Account</h2>
<p>扩充Account类，添加属性<code>transaction</code>，即一个<code>transaction</code>列表实例，每一次调用都会创建一个该实例，记录每次调用<code>deposit</code>和<code>withdraw</code>前后的余额。另外，每个<code>transaction</code>有一个<code>id</code>属性，记录之前账户对<code>deposit</code>或<code>withdraw</code>的调用次数。<code>id</code>对于每个账户内是唯一的，而不是在所有<code>transaction</code>中的全局标识符</p>
<p><code>transaction</code>有两个方法：</p>
<ul>
<li>changed：若在调用前后balance发生变化则返回True，否则返回False</li>
<li>report：返回一个字符串用来描述该次transaction，以id开始，之后返回消息</li>
</ul>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Transaction</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, id, before, after):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.id </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">id</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.before </span><span style="color: #D73A49">=</span><span style="color: #24292E"> before</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.after </span><span style="color: #D73A49">=</span><span style="color: #24292E"> after</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">changed</span><span style="color: #24292E">(self):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Return whether the transaction resulted in a changed balance."""</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.before </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.after:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">False</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">else</span><span style="color: #24292E"> :</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">report</span><span style="color: #24292E">(self):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Return a string describing the transaction.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">        </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">Transaction(3, 20, 10).report()</span></span>
<span class="line"><span style="color: #032F62">        '3: decreased 20-&gt;10'</span></span>
<span class="line"><span style="color: #032F62">        </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">Transaction(4, 20, 50).report()</span></span>
<span class="line"><span style="color: #032F62">        '4: increased 20-&gt;50'</span></span>
<span class="line"><span style="color: #032F62">        </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">Transaction(5, 50, 50).report()</span></span>
<span class="line"><span style="color: #032F62">        '5: no change'</span></span>
<span class="line"><span style="color: #032F62">        """</span></span>
<span class="line"><span style="color: #24292E">        msg </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'no change'</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.changed():</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.before </span><span style="color: #D73A49">&gt;</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.after:</span></span>
<span class="line"><span style="color: #24292E">                msg </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'decreased '</span><span style="color: #24292E"> </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">str</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.before)</span><span style="color: #D73A49">+</span><span style="color: #032F62">'-&gt;'</span><span style="color: #D73A49">+</span><span style="color: #005CC5">str</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.after)</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">else</span><span style="color: #24292E"> :</span></span>
<span class="line"><span style="color: #24292E">                msg </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">'increased '</span><span style="color: #24292E"> </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">str</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.before) </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #032F62">'-&gt;'</span><span style="color: #24292E"> </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">str</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.after)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">str</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.id) </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #032F62">': '</span><span style="color: #24292E"> </span><span style="color: #D73A49">+</span><span style="color: #24292E"> msg</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Account</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""A bank account that tracks its transaction history.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a = Account('Eric')</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a.deposit(100)    # Transaction 0 for a</span></span>
<span class="line"><span style="color: #032F62">    100</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b = Account('Erica')</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a.withdraw(30)    # Transaction 1 for a</span></span>
<span class="line"><span style="color: #032F62">    70</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a.deposit(10)     # Transaction 2 for a</span></span>
<span class="line"><span style="color: #032F62">    80</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b.deposit(50)     # Transaction 0 for b</span></span>
<span class="line"><span style="color: #032F62">    50</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b.withdraw(10)    # Transaction 1 for b</span></span>
<span class="line"><span style="color: #032F62">    40</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a.withdraw(100)   # Transaction 3 for a</span></span>
<span class="line"><span style="color: #032F62">    'Insufficient funds'</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">len(a.transactions)</span></span>
<span class="line"><span style="color: #032F62">    4</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">len([t for t in a.transactions if t.changed()])</span></span>
<span class="line"><span style="color: #032F62">    3</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">for t in a.transactions:</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">... </span><span style="color: #032F62">    print(t.report())</span></span>
<span class="line"><span style="color: #032F62">    0: increased 0-&gt;100</span></span>
<span class="line"><span style="color: #032F62">    1: decreased 100-&gt;70</span></span>
<span class="line"><span style="color: #032F62">    2: increased 70-&gt;80</span></span>
<span class="line"><span style="color: #032F62">    3: no change</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b.withdraw(100)   # Transaction 2 for b</span></span>
<span class="line"><span style="color: #032F62">    'Insufficient funds'</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b.withdraw(30)    # Transaction 3 for b</span></span>
<span class="line"><span style="color: #032F62">    10</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">for t in b.transactions:</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">... </span><span style="color: #032F62">    print(t.report())</span></span>
<span class="line"><span style="color: #032F62">    0: increased 0-&gt;50</span></span>
<span class="line"><span style="color: #032F62">    1: decreased 50-&gt;40</span></span>
<span class="line"><span style="color: #032F62">    2: no change</span></span>
<span class="line"><span style="color: #032F62">    3: decreased 40-&gt;10</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6A737D"># *** YOU NEED TO MAKE CHANGES IN SEVERAL PLACES IN THIS CLASS ***</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, account_holder):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.holder </span><span style="color: #D73A49">=</span><span style="color: #24292E"> account_holder</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.counter </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.transactions </span><span style="color: #D73A49">=</span><span style="color: #24292E"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">id_gene</span><span style="color: #24292E">(self):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.counter</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.counter</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">deposit</span><span style="color: #24292E">(self, amount):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Increase the account balance by amount, add the deposit</span></span>
<span class="line"><span style="color: #032F62">        to the transaction history, and return the new balance.</span></span>
<span class="line"><span style="color: #032F62">        """</span></span>
<span class="line"><span style="color: #24292E">        pre </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">+</span><span style="color: #24292E"> amount</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.transactions.append(Transaction(</span><span style="color: #005CC5">next</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.id_gene()),pre, </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance))</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">withdraw</span><span style="color: #24292E">(self, amount):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Decrease the account balance by amount, add the withdraw</span></span>
<span class="line"><span style="color: #032F62">        to the transaction history, and return the new balance.</span></span>
<span class="line"><span style="color: #032F62">        """</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> amount </span><span style="color: #D73A49">&gt;</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #005CC5">self</span><span style="color: #24292E">.transactions.append(Transaction(</span><span style="color: #005CC5">next</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.id_gene()), </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance, </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance))</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #032F62">'Insufficient funds'</span></span>
<span class="line"><span style="color: #24292E">        pre </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">-</span><span style="color: #24292E"> amount</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.transactions.append(Transaction(</span><span style="color: #005CC5">next</span><span style="color: #24292E">(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.id_gene()), pre, </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance))</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance</span></span></code></pre></div></div></figure>
<h2 id="q2-email">Q2: Email</h2>
<p>一个邮箱系统包括三个类：<code>Email</code>, <code>Server</code>,
<code>Client</code></p>
<p><code>Client</code>类可以<code>compose</code>邮件，该邮件会被<code>send</code>到<code>Server</code>类中</p>
<p><code>Server</code>类会把该邮件运到对应<code>Client</code>的<code>inbox</code>中，为了实现这个，一个<code>Server</code>类拥有一个字典<code>clients</code>，将<code>Email</code>中的<code>recipient_name</code>与拥有该名称的<code>Client</code>对象绑定</p>
<p>注意：client永远不会更改其使用的<code>server</code></p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Email</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""An email has the following instance attributes:</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">        msg (str): the contents of the message</span></span>
<span class="line"><span style="color: #032F62">        sender (Client): the client that sent the email</span></span>
<span class="line"><span style="color: #032F62">        recipient_name (str): the name of the recipient (another client)</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, msg, sender, recipient_name):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.msg </span><span style="color: #D73A49">=</span><span style="color: #24292E"> msg</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.sender </span><span style="color: #D73A49">=</span><span style="color: #24292E"> sender</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.recipient_name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> recipient_name</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Server</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Each Server has one instance attribute called clients that is a</span></span>
<span class="line"><span style="color: #032F62">    dictionary from client names to client objects.</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.clients </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">send</span><span style="color: #24292E">(self, email):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Append the email to the inbox of the client it is addressed to."""</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.clients[email.recipient_name].inbox.append(email)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">register_client</span><span style="color: #24292E">(self, client):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Add a client to the dictionary of clients."""</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.clients[client.name] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> client</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Client</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""A client has a server, a name (str), and an inbox (list).</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s = Server()</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a = Client(s, 'Alice')</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b = Client(s, 'Bob')</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a.compose('Hello, World!', 'Bob')</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b.inbox[0].msg</span></span>
<span class="line"><span style="color: #032F62">    'Hello, World!'</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">a.compose('CS 61A Rocks!', 'Bob')</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">len(b.inbox)</span></span>
<span class="line"><span style="color: #032F62">    2</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b.inbox[1].msg</span></span>
<span class="line"><span style="color: #032F62">    'CS 61A Rocks!'</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">b.inbox[1].sender.name</span></span>
<span class="line"><span style="color: #032F62">    'Alice'</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, server, name):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.inbox </span><span style="color: #D73A49">=</span><span style="color: #24292E"> []</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.server </span><span style="color: #D73A49">=</span><span style="color: #24292E"> server</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name</span></span>
<span class="line"><span style="color: #24292E">        server.register_client(</span><span style="color: #005CC5">self</span><span style="color: #24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">compose</span><span style="color: #24292E">(self, message, recipient_name):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Send an email with the given message to the recipient."""</span></span>
<span class="line"><span style="color: #24292E">        email </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Email(message, </span><span style="color: #005CC5">self</span><span style="color: #24292E">, recipient_name)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.server.send(email)</span></span></code></pre></div></div></figure>
<p>这里的inbox存储的是每一个email实例，故传参时应传入self</p>
<h2 id="q3-make-change">Q3: Make Change</h2>
<p>实现<code>make_change</code>函数，输入amount和coins字典</p>
<p>coins字典的键是一个正整数，表示面额；值也是一个正整数，表示硬币数量，如<code>{1:4, 5:2}</code>表示四个便士和两个五分</p>
<p>函数返回列表，其中元素是求和能达到amount数量的硬币列表，其中每种面额k最多使用<code>coins[k]</code>次</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">make_change</span><span style="color: #24292E">(amount, coins):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Return a list of coins that sum to amount, preferring the smallest coins</span></span>
<span class="line"><span style="color: #032F62">    available and placing the smallest coins first in the returned list.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    The coins argument is a dictionary with keys that are positive integer</span></span>
<span class="line"><span style="color: #032F62">    denominations and values that are positive integer coin counts.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(2, {2: 1})</span></span>
<span class="line"><span style="color: #032F62">    [2]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(2, {1: 2, 2: 1})</span></span>
<span class="line"><span style="color: #032F62">    [1, 1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(4, {1: 2, 2: 1})</span></span>
<span class="line"><span style="color: #032F62">    [1, 1, 2]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(4, {2: 1}) == None</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">coins = {2: 2, 3: 2, 4: 3, 5: 1}</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(4, coins)</span></span>
<span class="line"><span style="color: #032F62">    [2, 2]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(8, coins)</span></span>
<span class="line"><span style="color: #032F62">    [2, 2, 4]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(25, coins)</span></span>
<span class="line"><span style="color: #032F62">    [2, 3, 3, 4, 4, 4, 5]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">coins[8] = 1</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">make_change(25, coins)</span></span>
<span class="line"><span style="color: #032F62">    [2, 2, 4, 4, 5, 8]</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #D73A49">not</span><span style="color: #24292E"> coins:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">None</span></span>
<span class="line"><span style="color: #24292E">    smallest </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">min</span><span style="color: #24292E">(coins)</span></span>
<span class="line"><span style="color: #24292E">    rest </span><span style="color: #D73A49">=</span><span style="color: #24292E"> remove_one(coins, smallest)</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> amount </span><span style="color: #D73A49">&lt;</span><span style="color: #24292E"> smallest:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">None</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">elif</span><span style="color: #24292E"> amount </span><span style="color: #D73A49">==</span><span style="color: #24292E"> smallest:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> [smallest]</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        temp </span><span style="color: #D73A49">=</span><span style="color: #24292E"> make_change(amount</span><span style="color: #D73A49">-</span><span style="color: #24292E">smallest, rest)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #D73A49">not</span><span style="color: #24292E"> temp:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">return</span><span style="color: #24292E"> make_change(amount, rest)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">else</span><span style="color: #24292E"> :</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">return</span><span style="color: #24292E"> [smallest]</span><span style="color: #D73A49">+</span><span style="color: #24292E">temp</span></span></code></pre></div></div></figure>
<p>首先尝试使用最小面额的coin，但若无法实现则尝试使用更大面额</p>
<p>具体步骤：</p>
<ul>
<li><p>进入函数默认使用一个最小面额硬币</p></li>
<li><p>若<code>amount==samllest</code>：最小面额硬币即可满足需求，返回包含该值的列表</p></li>
<li><p>否则，递归调用<code>make_change(amount-smallest, rest)</code>，减去一次最小面额</p></li>
<li><p>若返回一个列表，则将该最小面额放入列表，并继续递归调用，将其返回的列表接在后面</p></li>
<li><p>若返回None，则表明使用最小面额无法实现，故递归调用<code>make_change(amount, rest)</code>，让函数把最小面额硬币去除后使用更大面额尝试</p></li>
</ul>
<h2 id="q4-change-machine">Q4: Change Machine</h2>
<p>完成<code>ChangeMachine</code>类中的<code>change</code>方法，每个该类的实例包含了一些coins，一开始都是便士。<code>change</code>方法传入正整数coin，把他添加到<code>coins</code>中，并返回列表，其中的硬币面额之和要达到cin</p>
<p>该类倾向于使用尽可能多的最小面额硬币</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">ChangeMachine</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""A change machine holds a certain number of coins, initially all pennies.</span></span>
<span class="line"><span style="color: #032F62">    The change method adds a single coin of some denomination X and returns a</span></span>
<span class="line"><span style="color: #032F62">    list of coins that sums to X. The machine prefers to return the smallest</span></span>
<span class="line"><span style="color: #032F62">    coins available. The total value in the machine never changes, and it can</span></span>
<span class="line"><span style="color: #032F62">    always make change for any coin (perhaps by returning the coin passed in).</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    The coins attribute is a dictionary with keys that are positive integer</span></span>
<span class="line"><span style="color: #032F62">    denominations and values that are positive integer coin counts.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m = ChangeMachine(2)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {1: 2}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(2)</span></span>
<span class="line"><span style="color: #032F62">    [1, 1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {2: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(2)</span></span>
<span class="line"><span style="color: #032F62">    [2]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {2: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(3)</span></span>
<span class="line"><span style="color: #032F62">    [3]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {2: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m = ChangeMachine(10) # 10 pennies</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {1: 10}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(5) # takes a nickel &amp; returns 5 pennies</span></span>
<span class="line"><span style="color: #032F62">    [1, 1, 1, 1, 1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {1: 5, 5: 1} # 5 pennies &amp; a nickel remain</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(3)</span></span>
<span class="line"><span style="color: #032F62">    [1, 1, 1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {1: 2, 3: 1, 5: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(2)</span></span>
<span class="line"><span style="color: #032F62">    [1, 1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(2) # not enough 1's remaining; return a 2</span></span>
<span class="line"><span style="color: #032F62">    [2]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {2: 1, 3: 1, 5: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(8) # cannot use the 2 to make 8, so use 3 &amp; 5</span></span>
<span class="line"><span style="color: #032F62">    [3, 5]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {2: 1, 8: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(1) # return the penny passed in (it's the smallest)</span></span>
<span class="line"><span style="color: #032F62">    [1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(9) # return the 9 passed in (no change possible)</span></span>
<span class="line"><span style="color: #032F62">    [9]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {2: 1, 8: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(10)</span></span>
<span class="line"><span style="color: #032F62">    [2, 8]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {10: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m = ChangeMachine(9)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">[m.change(k) for k in [2, 2, 3]]</span></span>
<span class="line"><span style="color: #032F62">    [[1, 1], [1, 1], [1, 1, 1]]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {1: 2, 2: 2, 3: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(5) # Prefers [1, 1, 3] to [1, 2, 2] (more pennies)</span></span>
<span class="line"><span style="color: #032F62">    [1, 1, 3]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.change(7)</span></span>
<span class="line"><span style="color: #032F62">    [2, 5]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">m.coins == {2: 1, 7: 1}</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, pennies):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.coins </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span><span style="color: #005CC5">1</span><span style="color: #24292E">: pennies}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">change</span><span style="color: #24292E">(self, coin):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">"""Return change for coin, removing the result from self.coins."""</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.coins[coin] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.coins.get(coin, </span><span style="color: #005CC5">0</span><span style="color: #24292E">)</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">        result </span><span style="color: #D73A49">=</span><span style="color: #24292E"> make_change(coin, </span><span style="color: #005CC5">self</span><span style="color: #24292E">.coins)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">for</span><span style="color: #24292E"> c </span><span style="color: #D73A49">in</span><span style="color: #24292E"> result:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #005CC5">self</span><span style="color: #24292E">.coins </span><span style="color: #D73A49">=</span><span style="color: #24292E"> remove_one(</span><span style="color: #005CC5">self</span><span style="color: #24292E">.coins, c)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> result</span></span></code></pre></div></div></figure>
<ul>
<li>将加入的coin放入coins字典，注意，这里的键为面额对应数量，而值为面额，故我们用get方法获取传入coin的键，并在此基础上+1（我们可以在第二个参数设置默认值，当没有对应面额时，get会返回设定值而非None）</li>
<li>之后调用<code>make_change</code>方法，获得最小面额能实现达到coin数的硬币列表</li>
<li>使用<code>remove_one</code>将类中已经用过的硬币移除</li>
<li>返回列表</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Attributes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Attributes/" class="post-title-link" itemprop="url">【CS61A】CS61A——Attributes</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-30 17:21:41" itemprop="dateCreated datePublished" datetime="2025-03-30T17:21:41+08:00">2025-03-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:48:16" itemprop="dateModified" datetime="2025-07-31T17:48:16+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="attributes">Attributes</h1>
<h2 id="class-attributes">Class Attributes</h2>
<p>语法： <figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #D73A49">&lt;</span><span style="color: #24292E">name</span><span style="color: #D73A49">&gt;</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">&lt;</span><span style="color: #24292E">suite</span><span style="color: #D73A49">&gt;</span></span></code></pre></div></div></figure>
class声明将会创建一个新类并将其绑定到<code>&lt;name&gt;</code>上，作为当前环境的第一个作用域
类语句内部，赋值语句和def语句创建类属性，此时它们作为类属性放入类中，而非在作用域中
当class声明执行时，内部语句才会执行</p>
<p>类属性在类的所有实例之间共享
这样我们不必在每个创建的实例中存储此值，而只需要在类中存储一次</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Account</span><span style="color: #24292E">:</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    interest </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0.02</span><span style="color: #24292E"> </span><span style="color: #6A737D"># 类属性</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, account_holder):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.holder </span><span style="color: #D73A49">=</span><span style="color: #24292E"> account_holder</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">deposit</span><span style="color: #24292E">(self, amount):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">+</span><span style="color: #24292E"> amount</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance  </span></span>
<span class="line"><span style="color: #24292E">tom </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Account(</span><span style="color: #032F62">'Tom'</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">jim </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Account(</span><span style="color: #032F62">'Jim'</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(tom.interest)</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(jim.interest)</span></span></code></pre></div></div></figure>
<pre><code>0.02
0.02</code></pre>
<h2 id="attribute-lookup">Attribute Lookup</h2>
<h3 id="by-name">By Name</h3>
<p>表达式提供对象，名称提供要查找的属性名称
但通过name查找将会查找多个位置，这取决于点表达式： -
首先执行点左侧表达式，生成该对象 -
<code>&lt;name&gt;</code>与该对象的实例属性匹配，如果存在该名称的属性，则返回值
- 如果没有找到，则在该对象的类中查找（类属性） -
返回的值是整个表达式的值，除非是一个函数，函数将会返回一个绑定的方法，对象填充为self</p>
<h3 id="by-function">By Function</h3>
<p>使用<code>getatter</code>函数，可以用属性名的字符串来查找对应属性
使用<code>hasatter</code>函数，可以判断是否具有该属性
<code>getatter</code>函数与点表达式查询方式相同
在对象中查询属性可能会返回实例属性或类属性之一</p>
<h2 id="attribute-assignment">Attribute Assignment</h2>
<p>左侧有点表达式的赋值语句会影响点表达式对应对象的属性 -
如果对象是一个实例，则赋值将设置一个实例属性 -
如果对象是一个类，则赋值将设置一个类属性</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">tom.interest </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0.08</span></span>
<span class="line"><span style="color: #24292E">Account.interest </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0.04</span></span></code></pre></div></div></figure>
<p>第一个语句将会在tom实例中寻找interest属性，没有找到，则在其中添加该属性
第二个语句将会在Account类中寻找interest属性，找到后将值修改为对应值</p>
<h2 id="method-calls">Method Calls</h2>
<p>方法可使用点表达式调用 其中表达式可以是任何有效的python表达式
表达式的值是通过该表达式值对象中查找<code>&lt;name&gt;</code>而计算的属性值</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">tom.deposit(</span><span style="color: #005CC5">10</span><span style="color: #24292E">)</span></span></code></pre></div></div></figure>
<h2 id="bound-methods">Bound Methods</h2>
<h3 id="terminlology">Terminlology</h3>
<ul>
<li>所有对象都有属性，均为name-value二元组</li>
<li>类是对象的一种， 故类也有属性</li>
<li>实例属性：一个实例的属性</li>
<li>类属性：类本身的属性，但仍可以从实例访问</li>
<li>python中函数也是对象</li>
<li>绑定方法也是对象，即第一个参数为self的函数，该参数已经绑定到了一个实例</li>
<li>点表达式执行那些类属性是函数的绑定方法</li>
</ul>
<h2 id="methods-and-functions">Methods and Functions</h2>
<p>python区分方法与函数 - 函数是从一开始就定义的 -
绑定方法在方法被调用时将一个函数和其对象绑定起来，
即<strong>Object+Function = Bound Method</strong></p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(</span><span style="color: #005CC5">type</span><span style="color: #24292E">(Account.deposit))</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(</span><span style="color: #005CC5">type</span><span style="color: #24292E">(tom.deposit))</span></span></code></pre></div></div></figure>
<pre><code>&lt;class 'function'&gt;
&lt;class 'method'&gt;</code></pre>
<p>此时我们有两种方法调用 1.
作为函数调用，此时需要传递self和amount两个参数 2.
作为绑定方法调用，此时只需要传递amount参数</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">Account.deposit(tom, </span><span style="color: #005CC5">1001</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">tom.deposit(</span><span style="color: #005CC5">1007</span><span style="color: #24292E">)</span></span></code></pre></div></div></figure>
<pre><code>2008</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Objects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Objects/" class="post-title-link" itemprop="url">【CS61A】CS61A——Objects</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-30 17:21:41" itemprop="dateCreated datePublished" datetime="2025-03-30T17:21:41+08:00">2025-03-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:51:51" itemprop="dateModified" datetime="2025-07-31T17:51:51+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="objects">Objects</h1>
<h2 id="oopobject-oriented-programming">OOP(Object-Oriented
Programming)</h2>
<h3 id="类class">类(class)</h3>
<p>定义了某种类型的多个对象该如何表现 ### 对象(object)
类的一个实例，决定该类的类型 ### 方法(method)
在对象上调用的函数，使用点(.)调用 注意
方法不同于函数在于方法特定于对应对象 ### 蕴含理念
将复杂的大型程序组织成小的模块化组件 - 使用数据抽象 -
捆绑多个信息与相关行为 使用分散状态的计算 - 每个对象有自己的本地状态 -
每个对象也知道如何管理自己的本地状态 -
使用<strong>方法</strong>与对象交互 -
几个对象可能属于一个共同<strong>类</strong>的实例 -
不同的类可以相互关联</p>
<h2 id="例lists">例：Lists</h2>
<p>内置的list函数其实是一个类
在可迭代对象上调用list可以创建一个list类的新实例
list类定义了有关list的各种用法： - 方法：append, extend, insert ,etc. -
加法与乘法运算 - 元素查找与赋值</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(</span><span style="color: #005CC5">list</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">s </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">list</span><span style="color: #24292E">(</span><span style="color: #005CC5">range</span><span style="color: #24292E">(</span><span style="color: #005CC5">3</span><span style="color: #24292E">))</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(</span><span style="color: #005CC5">type</span><span style="color: #24292E">(s))</span></span></code></pre></div></div></figure>
<pre><code>&lt;class 'list'&gt;
&lt;class 'list'&gt;</code></pre>
<h2 id="class-statement">Class Statement</h2>
<p>一个类描述了其实例的行为
例如，我们定义一个银行账户类，实现的功能如下：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">class</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Account</span><span style="color: #24292E">:   </span><span style="color: #6A737D"># 一个类以class开头，并给他命名</span></span>
<span class="line"><span style="color: #24292E">    </span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #005CC5">__init__</span><span style="color: #24292E">(self, account_holder):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">'''</span></span>
<span class="line"><span style="color: #032F62">        定义创建类的新实例时会发生什么，即给予对象属性</span></span>
<span class="line"><span style="color: #032F62">        一般使用方法名__init__来构造一个类的实例，调用时自动执行, 该方法有时也被称为构造方法</span></span>
<span class="line"><span style="color: #032F62">        将新实例称为self，并给它分配属性，其中，account_holder是调用时传入的内容</span></span>
<span class="line"><span style="color: #032F62">        '''</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.holder </span><span style="color: #D73A49">=</span><span style="color: #24292E"> account_holder</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">deposit</span><span style="color: #24292E">(self, amount):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">'''</span></span>
<span class="line"><span style="color: #032F62">        deposit方法调用两个参数</span></span>
<span class="line"><span style="color: #032F62">        self： self是该方法被调用时的类的实例</span></span>
<span class="line"><span style="color: #032F62">        amount：添加的余额</span></span>
<span class="line"><span style="color: #032F62">        '''</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">+</span><span style="color: #24292E"> amount</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance   </span><span style="color: #6A737D"># 出现输出时的情况，若没有return则返回None</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">withdraw</span><span style="color: #24292E">(self, amount):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> amount </span><span style="color: #D73A49">&gt;</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance:   </span><span style="color: #6A737D"># 引用balance时要加.,因为其是对象的一个属性</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #032F62">'Insufficient funds'</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance </span><span style="color: #D73A49">-</span><span style="color: #24292E"> amount</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">self</span><span style="color: #24292E">.balance</span></span></code></pre></div></div></figure>
<h2 id="creating-instances">Creating Instances</h2>
<h3 id="object-construction">Object Construction</h3>
<p>当一个类被调用时: - 创建一个该类的新的实例 -
<code>__init__</code>方法被调用，其中以新对象作为其中的第一个元素,
一般命名为self, 并带有在调用表达式中的任何额外参数</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">a </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Account(</span><span style="color: #032F62">'Alan'</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(a.holder)</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(a.balance)</span></span></code></pre></div></div></figure>
<pre><code>Alan
0</code></pre>
<h3 id="instance-attributes">Instance Attributes</h3>
<p>对象的属性可以通过点号表达式(.)来访问与更改 若属性之前不存在,
也可以为其赋值, 可以在任何时候增加新的属性</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">a.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">12</span><span style="color: #24292E">   </span><span style="color: #6A737D"># 已存在的属性可以被更改</span></span>
<span class="line"><span style="color: #24292E">b </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Account(</span><span style="color: #032F62">'Ada'</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">b.balance </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">20</span></span>
<span class="line"><span style="color: #24292E">a.backup </span><span style="color: #D73A49">=</span><span style="color: #24292E"> b   </span><span style="color: #6A737D"># 新属性可以在任何时候添加</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(a.backup.balance)</span></span></code></pre></div></div></figure>
<pre><code>20</code></pre>
<h3 id="object-identity">Object Identity</h3>
<p>每个用户定义类的对象都有一个唯一的标识
标识运算符<code>is</code>与<code>is not</code>可以判断两个表达式是否是相同的对象
使用赋值将一个对象绑定到一个新名称时不会创建一个新对象</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(a </span><span style="color: #D73A49">is</span><span style="color: #24292E"> a)</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(a </span><span style="color: #D73A49">is</span><span style="color: #24292E"> </span><span style="color: #D73A49">not</span><span style="color: #24292E"> b)</span></span>
<span class="line"><span style="color: #24292E">c </span><span style="color: #D73A49">=</span><span style="color: #24292E"> a</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(a </span><span style="color: #D73A49">is</span><span style="color: #24292E"> c)</span></span></code></pre></div></div></figure>
<pre><code>True
True
True</code></pre>
<h2 id="methods">Methods</h2>
<h3 id="invoking-methods">Invoking Methods</h3>
<p>调用方法意味着用点表达式定义类中定义的一个方法
所有调用方法都通过self变量访问对象,所以他们可以访问与操作对象的属性
如deposit方法中定义了两个参数, 但点表达式会自动为方法提供第一个参数</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #24292E">tom </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Account(</span><span style="color: #032F62">'Tom'</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #005CC5">print</span><span style="color: #24292E">(tom.deposit(</span><span style="color: #005CC5">100</span><span style="color: #24292E">))  </span><span style="color: #6A737D"># 调用时只需要一个参数, 方法会自动绑定到self(这里是tom)</span></span></code></pre></div></div></figure>
<pre><code>100</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Homework4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Homework4/" class="post-title-link" itemprop="url">【CS61A】CS61A——Homework 4</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-28 21:47:43" itemprop="dateCreated datePublished" datetime="2025-03-28T21:47:43+08:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:50:32" itemprop="dateModified" datetime="2025-07-31T17:50:32+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="homework-4">Homework 4</h1>
<h2 id="sequence">Sequence</h2>
<h3 id="q1-deep-map">Q1: Deep Map</h3>
<p>写一个函数<code>deep_map</code>，使得传入的列表s（s可能是嵌套列表）中的每一个元素替换为该元素传入函数f后的返回值</p>
<p><strong>每一个元素包括嵌套列表中的每一个元素</strong></p>
<blockquote>
<p>提示：<code>type(a)==list</code>会返回True如果a是列表</p>
</blockquote>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">deep_map</span><span style="color: #24292E">(f, s):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Replace all non-list elements x with f(x) in the nested list s.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">six = [1, 2, [3, [4], 5], 6]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">deep_map(lambda x: x * x, six)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">six</span></span>
<span class="line"><span style="color: #032F62">    [1, 4, [9, [16], 25], 36]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62"># Check that you're not making new lists</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s = [3, [1, [4, [1]]]]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s1 = s[1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s2 = s1[1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s3 = s2[1]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">deep_map(lambda x: x + 1, s)</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s</span></span>
<span class="line"><span style="color: #032F62">    [4, [2, [5, [2]]]]</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s1 is s[1]</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s2 is s1[1]</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">s3 is s2[1]</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> i </span><span style="color: #D73A49">in</span><span style="color: #24292E"> </span><span style="color: #005CC5">range</span><span style="color: #24292E">(</span><span style="color: #005CC5">len</span><span style="color: #24292E">(s)):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">type</span><span style="color: #24292E">(s[i])</span><span style="color: #D73A49">==</span><span style="color: #005CC5">list</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">            deep_map(f,s[i])</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">            s[i]</span><span style="color: #D73A49">=</span><span style="color: #24292E">f(s[i])</span></span></code></pre></div></div></figure>
<p>遍历列表下标i，如果发现内部有嵌套列表，就递归进入遍历嵌套列表，若当前位置为一般元素，则调用函数并将结果替换</p>
<h2 id="data-abstraction">Data Abstraction</h2>
<h3 id="要用到的adt">要用到的ADT</h3>
<p>Mobile：一种悬挂雕像</p>
<ul>
<li>一个mobile一定有一个左arm和一个右arm</li>
<li>一个arm有一个正数大小的长度，且尾端一定挂着一个mobile或一个planet</li>
<li>一个planet有一个正数大小的质量，且没有东西挂在上面</li>
</ul>
<h3 id="q2-mass">Q2: Mass</h3>
<p>补充完成构造器planet与选择器mass</p>
<p>使得每一格planet用一个二元列表表示：<code>['planet', mass]</code></p>
<p>其中<code>total_mass</code>函数可以用来计算一个planet或一个mobile的质量</p>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6F42C1">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">planet</span><span style="color: #24292E">(</span><span style="color: #6F42C1">mass</span><span style="color: #24292E">):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Construct a planet of some mass."""</span></span>
<span class="line"><span style="color: #24292E">    assert mass </span><span style="color: #D73A49">&gt;</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> [</span><span style="color: #032F62">'planet'</span><span style="color: #24292E">, </span><span style="color: #E36209">mass</span><span style="color: #24292E">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">def mass(</span><span style="color: #6F42C1">p</span><span style="color: #24292E">):</span></span>
<span class="line"><span style="color: #24292E">    """Select the mass of a planet."""</span></span>
<span class="line"><span style="color: #24292E">    assert is_planet(</span><span style="color: #6F42C1">p</span><span style="color: #24292E">), 'must call mass on a planet'</span></span>
<span class="line"><span style="color: #24292E">    return p[1]</span></span></code></pre></div></div></figure>
<p>按照提示构造即可</p>
<h3 id="q3-balanced">Q3: Balanced</h3>
<p>实现balanced函数，判断m是否是一个”balanced mobile”</p>
<p>“balanced mobile”的定义如下：</p>
<ul>
<li>左arm的扭矩等于右arm的扭矩，其中扭矩为左arm的长度与挂在左arm上的质量之积</li>
<li>挂在arm尾端的mobile自身为balanced
mobile，planet自身也是balanced的</li>
</ul>
<blockquote>
<p>提示：使用<code>total_mass</code>函数，选择器函数，不要逾越ADT的屏障</p>
</blockquote>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">balanced</span><span style="color: #24292E">(m):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Return whether m is balanced.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">t, u, v = examples()</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">balanced(t)</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">balanced(v)</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">p = mobile(arm(3, t), arm(2, u))</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">balanced(p)</span></span>
<span class="line"><span style="color: #032F62">    False</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">balanced(mobile(arm(1, v), arm(1, p)))</span></span>
<span class="line"><span style="color: #032F62">    False</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">balanced(mobile(arm(1, p), arm(1, v)))</span></span>
<span class="line"><span style="color: #032F62">    False</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">from construct_check import check</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62"># checking for abstraction barrier violations by banning indexing</span></span>
<span class="line"><span style="color: #032F62">    </span><span style="color: #D73A49">&gt;&gt;&gt; </span><span style="color: #032F62">check(HW_SOURCE_FILE, 'balanced', ['Index'])</span></span>
<span class="line"><span style="color: #032F62">    True</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> is_planet(m):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">True</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        torque_left </span><span style="color: #D73A49">=</span><span style="color: #24292E"> length(left(m))</span><span style="color: #D73A49">*</span><span style="color: #24292E">total_mass(end(left(m)))</span></span>
<span class="line"><span style="color: #24292E">        torque_right </span><span style="color: #D73A49">=</span><span style="color: #24292E"> length(right(m))</span><span style="color: #D73A49">*</span><span style="color: #24292E">total_mass(end(right(m)))</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> torque_left </span><span style="color: #D73A49">==</span><span style="color: #24292E"> torque_right </span><span style="color: #D73A49">and</span><span style="color: #24292E"> balanced(end(left(m))) </span><span style="color: #D73A49">and</span><span style="color: #24292E"> balanced(end(right(m)))</span></span></code></pre></div></div></figure>
<p>这个结构类似树，我们可以递归的求解这个问题</p>
<ul>
<li>Base
case：若传入的是一个planet，则返回True，因为planet在这个结构中类似叶子节点，是整个mobile的终点</li>
<li>递归：每次需要比较mobile的左右扭矩是否相等，同时递归比较左右arm下的左右扭矩是否相等，直到递归到planet直接返回True</li>
</ul>
<h2 id="trees">Trees</h2>
<h3 id="q4-maximum-path-sum">Q4: Maximum Path Sum</h3>
<p>写一个函数，返回树上从根节点到叶子节点的所有路径中节点权值总和最大值</p>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6F42C1">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">max_path_sum</span><span style="color: #24292E">(</span><span style="color: #6F42C1">t</span><span style="color: #24292E">):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #032F62">"""Return the maximum root-to-leaf path sum of a tree.</span></span>
<span class="line"><span style="color: #032F62">    &gt;&gt;&gt; t = tree(1, [tree(5, [tree(1), tree(3)]), tree(10)])</span></span>
<span class="line"><span style="color: #032F62">    &gt;&gt;&gt; max_path_sum(t) # 1, 10</span></span>
<span class="line"><span style="color: #032F62">    11</span></span>
<span class="line"><span style="color: #032F62">    &gt;&gt;&gt; t2 = tree(5, [tree(4, [tree(1), tree(3)]), tree(2, [tree(10), tree(3)])])</span></span>
<span class="line"><span style="color: #032F62">    &gt;&gt;&gt; max_path_sum(t2) # 5, 2, 10</span></span>
<span class="line"><span style="color: #032F62">    17</span></span>
<span class="line"><span style="color: #032F62">    """</span></span>
<span class="line"><span style="color: #24292E">    max_n </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #6F42C1">is_leaf</span><span style="color: #24292E">(t):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #6F42C1">label</span><span style="color: #24292E">(t)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> b in </span><span style="color: #6F42C1">branches</span><span style="color: #24292E">(t):</span></span>
<span class="line"><span style="color: #24292E">        max_n</span><span style="color: #D73A49">=</span><span style="color: #6F42C1">max</span><span style="color: #24292E">(</span><span style="color: #6F42C1">max_path_sum</span><span style="color: #24292E">(b),max_n)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> max_n</span><span style="color: #D73A49">+</span><span style="color: #6F42C1">label</span><span style="color: #24292E">(t)</span></span></code></pre></div></div></figure>
<p>使用递归遍历</p>
<p>先直接深入到叶子节点，发现叶子节点则返回节点权值，再往前返回，每上一个节点返回已经求和的值+当前节点权值，且每次遍历取当前不同路径的最大值</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/CS61A/CS61A%E2%80%94%E2%80%94Generators/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/CS61A/CS61A%E2%80%94%E2%80%94Generators/" class="post-title-link" itemprop="url">【CS61A】CS61A——Generators</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-27 09:28:07" itemprop="dateCreated datePublished" datetime="2025-03-27T09:28:07+08:00">2025-03-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:49:58" itemprop="dateModified" datetime="2025-07-31T17:49:58+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="generators">Generators</h1>
<h2 id="generator-functions">Generator Functions</h2>
<ul>
<li>生成器函数是用来<strong>生成(yields)</strong>值而非返回值的函数</li>
<li>生成器函数使用yield关键字返回生成的值</li>
<li>生成器可以多次生成值，而普通函数只能返回一次值</li>
<li>生成器是调用生成器函数时自动创建的迭代器</li>
<li>调用生成器函数，它会返回一个生成器来迭代该函数生成的值</li>
<li>当函数执行到yield时，生成的值将会作为下次迭代器的数值，而此时执行在yield处执行，但会记住当前环境，以便下次继续执行
e.g.</li>
</ul>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">evens</span><span style="color: #24292E">(start, end):</span></span>
<span class="line"><span style="color: #24292E">    even </span><span style="color: #D73A49">=</span><span style="color: #24292E"> start </span><span style="color: #D73A49">+</span><span style="color: #24292E"> (start</span><span style="color: #D73A49">%</span><span style="color: #005CC5">2</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> even</span><span style="color: #D73A49">&lt;</span><span style="color: #24292E">end:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> even</span></span>
<span class="line"><span style="color: #24292E">        even</span><span style="color: #D73A49">+=</span><span style="color: #005CC5">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">__name__</span><span style="color: #24292E"> </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #032F62">"__main__"</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    t </span><span style="color: #D73A49">=</span><span style="color: #24292E"> evens(</span><span style="color: #005CC5">2</span><span style="color: #24292E">,</span><span style="color: #005CC5">10</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> i </span><span style="color: #D73A49">in</span><span style="color: #24292E"> t:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">print</span><span style="color: #24292E">(i)</span></span></code></pre></div></div></figure>
<pre><code>2
4
6
8</code></pre>
<h2 id="generators-iterators">Generators &amp; Iterators</h2>
<p>yield from语句 yield from语句允许从一个迭代器或可迭代变量中生成所有值
两个例子：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">countdown</span><span style="color: #24292E">(k):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> k</span><span style="color: #D73A49">&gt;</span><span style="color: #005CC5">0</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> k</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield from</span><span style="color: #24292E"> countdown(k</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #032F62">'''</span></span>
<span class="line"><span style="color: #032F62">        等价于 </span></span>
<span class="line"><span style="color: #032F62">        for i in countdown(k-1):</span></span>
<span class="line"><span style="color: #032F62">            yield i</span></span>
<span class="line"><span style="color: #032F62">        '''</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> </span><span style="color: #032F62">'Blast off'</span></span>
<span class="line"><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">__name__</span><span style="color: #24292E"> </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #032F62">"__main__"</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    t </span><span style="color: #D73A49">=</span><span style="color: #24292E"> countdown(</span><span style="color: #005CC5">3</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> i </span><span style="color: #D73A49">in</span><span style="color: #24292E"> t:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">print</span><span style="color: #24292E">(i)</span></span></code></pre></div></div></figure>
<pre><code>3
2
1
Blast of</code></pre>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">prefixes</span><span style="color: #24292E">(s):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> s:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield from</span><span style="color: #24292E"> prefixes(s[:</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">])</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> s</span></span>
<span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">substrings</span><span style="color: #24292E">(s):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> s:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield from</span><span style="color: #24292E"> prefixes(s)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield from</span><span style="color: #24292E"> substrings(s[</span><span style="color: #005CC5">1</span><span style="color: #24292E">:])</span></span>
<span class="line"><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">__name__</span><span style="color: #24292E"> </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #032F62">"__main__"</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">print</span><span style="color: #24292E">(</span><span style="color: #005CC5">list</span><span style="color: #24292E">(prefixes(</span><span style="color: #032F62">"both"</span><span style="color: #24292E">)))</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">print</span><span style="color: #24292E">(</span><span style="color: #005CC5">list</span><span style="color: #24292E">(substrings(</span><span style="color: #032F62">"top"</span><span style="color: #24292E">)))</span></span></code></pre></div></div></figure>
<pre><code>['b', 'bo', 'bot', 'both']
['t', 'to', 'top', 'o', 'op', 'p']</code></pre>
<h2 id="example-partitions">Example: Partitions</h2>
<p>详见递归时的数字分割例子 使用列表：</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">partitions</span><span style="color: #24292E">(n,m):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> n</span><span style="color: #D73A49">&lt;</span><span style="color: #005CC5">0</span><span style="color: #24292E"> </span><span style="color: #D73A49">or</span><span style="color: #24292E"> m</span><span style="color: #D73A49">==</span><span style="color: #005CC5">0</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> []</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">else</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        exact_match </span><span style="color: #D73A49">=</span><span style="color: #24292E"> []</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> n</span><span style="color: #D73A49">==</span><span style="color: #24292E">m:</span></span>
<span class="line"><span style="color: #24292E">            exact_match </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [</span><span style="color: #005CC5">str</span><span style="color: #24292E">(m)]</span></span>
<span class="line"><span style="color: #24292E">        with_m </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [p</span><span style="color: #D73A49">+</span><span style="color: #032F62">'+'</span><span style="color: #D73A49">+</span><span style="color: #005CC5">str</span><span style="color: #24292E">(m) </span><span style="color: #D73A49">for</span><span style="color: #24292E"> p </span><span style="color: #D73A49">in</span><span style="color: #24292E"> partitions(n</span><span style="color: #D73A49">-</span><span style="color: #24292E">m,m)]</span></span>
<span class="line"><span style="color: #24292E">        without_m </span><span style="color: #D73A49">=</span><span style="color: #24292E"> partitions(n,m</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">return</span><span style="color: #24292E"> exact_match</span><span style="color: #D73A49">+</span><span style="color: #24292E">with_m</span><span style="color: #D73A49">+</span><span style="color: #24292E">without_m</span></span>
<span class="line"><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">__name__</span><span style="color: #24292E"> </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #032F62">"__main__"</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> p </span><span style="color: #D73A49">in</span><span style="color: #24292E"> partitions(</span><span style="color: #005CC5">6</span><span style="color: #24292E">,</span><span style="color: #005CC5">4</span><span style="color: #24292E">):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">print</span><span style="color: #24292E">(p)</span></span></code></pre></div></div></figure>
<pre><code>2+4
1+1+4
3+3
1+2+3
1+1+1+3
2+2+2
1+1+2+2
1+1+1+1+2
1+1+1+1+1+1</code></pre>
<p>使用生成器： 使代码更优雅，而且可以输出指定个数的可能结果</p>
<figure class="shiki python"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">def</span><span style="color: #24292E"> </span><span style="color: #6F42C1">partitions</span><span style="color: #24292E">(n,m):</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> n</span><span style="color: #D73A49">&gt;</span><span style="color: #005CC5">0</span><span style="color: #24292E"> </span><span style="color: #D73A49">and</span><span style="color: #24292E"> m</span><span style="color: #D73A49">&gt;</span><span style="color: #005CC5">0</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">if</span><span style="color: #24292E"> n</span><span style="color: #D73A49">==</span><span style="color: #24292E">m:</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> </span><span style="color: #005CC5">str</span><span style="color: #24292E">(m)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">for</span><span style="color: #24292E"> p </span><span style="color: #D73A49">in</span><span style="color: #24292E"> partitions(n</span><span style="color: #D73A49">-</span><span style="color: #24292E">m,m):</span></span>
<span class="line"><span style="color: #24292E">            </span><span style="color: #D73A49">yield</span><span style="color: #24292E"> p</span><span style="color: #D73A49">+</span><span style="color: #032F62">'+'</span><span style="color: #D73A49">+</span><span style="color: #005CC5">str</span><span style="color: #24292E">(m)</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #D73A49">yield from</span><span style="color: #24292E"> partitions(n,m</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #D73A49">if</span><span style="color: #24292E"> </span><span style="color: #005CC5">__name__</span><span style="color: #24292E"> </span><span style="color: #D73A49">==</span><span style="color: #24292E"> </span><span style="color: #032F62">"__main__"</span><span style="color: #24292E">:</span></span>
<span class="line"><span style="color: #24292E">    t </span><span style="color: #D73A49">=</span><span style="color: #24292E"> partitions(</span><span style="color: #005CC5">6</span><span style="color: #24292E">,</span><span style="color: #005CC5">4</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> p </span><span style="color: #D73A49">in</span><span style="color: #24292E"> </span><span style="color: #005CC5">range</span><span style="color: #24292E">(</span><span style="color: #005CC5">5</span><span style="color: #24292E">):</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">print</span><span style="color: #24292E">(</span><span style="color: #005CC5">next</span><span style="color: #24292E">(t))</span></span></code></pre></div></div></figure>
<pre><code>2+4
1+1+4
3+3
1+2+3
1+1+1+3</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://izayoisakuye.github.io/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="IzayoiSakuye">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | 红魔咖啡馆">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/" class="post-title-link" itemprop="url">【数据结构】队列</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-26 07:14:37" itemprop="dateCreated datePublished" datetime="2025-03-26T07:14:37+08:00">2025-03-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-31 17:55:29" itemprop="dateModified" datetime="2025-07-31T17:55:29+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">算法与数据结构</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="队列">队列</h1>
<h2 id="特点">特点</h2>
<ul>
<li>只允许在表的一端插入，而在另一端删除</li>
<li>允许插入的一端被称为队尾（rear），允许删除的一端被称为队头（front）</li>
<li>队列遵循<strong>先进先出（FIFO）</strong>的原则</li>
</ul>
<h2 id="顺序表实现">顺序表实现</h2>
<h3 id="建表">建表</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">int</span><span style="color: #24292E"> ElemType;</span></span>
<span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">struct</span><span style="color: #24292E"> {</span></span>
<span class="line"><span style="color: #24292E">  ElemType data[MAXSIZE];</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> front;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> rear;</span></span>
<span class="line"><span style="color: #24292E">}</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E">;</span></span></code></pre></div></div></figure>
<h3 id="初始化">初始化</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">void</span><span style="color: #24292E"> </span><span style="color: #6F42C1">initQueue</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;front </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;rear </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h3 id="判空">判空</h3>
<p>判断首尾相遇即为空（并非为0）</p>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 判空</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">isEmpty</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (Q-&gt;front </span><span style="color: #D73A49">==</span><span style="color: #24292E"> Q-&gt;rear){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6F42C1">printf</span><span style="color: #24292E">(</span><span style="color: #032F62">"Empty"</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">else</span><span style="color: #24292E"> {</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h3 id="出队">出队</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 出队</span></span>
<span class="line"><span style="color: #6F42C1">ElemType</span><span style="color: #24292E"> </span><span style="color: #6F42C1">dequeue</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (</span><span style="color: #6F42C1">isEmpty</span><span style="color: #24292E">(Q)){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6F42C1">printf</span><span style="color: #24292E">(</span><span style="color: #032F62">"Empty"</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  } </span></span>
<span class="line"><span style="color: #24292E">  ElemType e </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Q-&gt;data[Q-&gt;front];</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;front</span><span style="color: #D73A49">++</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> e;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h3 id="入队">入队</h3>
<p>队列不满时才能入队，但有一种特殊情况：</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250321142019294.png" class="" title="入队-1">
<p>此时队尾在最后，但队头在中间，意味着已经有数据出队，此时队列里仍有位置</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250321142256990.png" class="" title="入队-2">
<p>这时我们需要将数据移到队头，使队尾向前以便插入元素</p>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 判断队列是否满</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">queueFull</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (Q-&gt;front </span><span style="color: #D73A49">&gt;</span><span style="color: #005CC5">0</span><span style="color: #24292E">){</span><span style="color: #6A737D"> //说明front在中间，前面还有位置</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">int</span><span style="color: #24292E"> step </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Q-&gt;front;</span><span style="color: #6A737D"> // 取front的位置</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">for</span><span style="color: #24292E"> (</span><span style="color: #D73A49">int</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Q-&gt;front; i</span><span style="color: #D73A49">&lt;=</span><span style="color: #24292E">Q-&gt;rear; i</span><span style="color: #D73A49">++</span><span style="color: #24292E">){</span><span style="color: #6A737D"> // 遍历已经有元素的位置</span></span>
<span class="line"><span style="color: #24292E">      Q-&gt;data[i</span><span style="color: #D73A49">-</span><span style="color: #24292E">step] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Q-&gt;data[i];</span><span style="color: #6A737D"> // 向前移动到头</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">    Q-&gt;front </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span><span style="color: #6A737D"> // 让front指向0</span></span>
<span class="line"><span style="color: #24292E">    Q-&gt;rear </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Q-&gt;rear </span><span style="color: #D73A49">-</span><span style="color: #24292E"> step;</span><span style="color: #6A737D"> // rear往前调整</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">else</span><span style="color: #24292E"> {</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">}</span></span>
<span class="line"><span style="color: #6A737D">// 入队</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">enqueue</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">, </span><span style="color: #6F42C1">ElemType</span><span style="color: #24292E"> </span><span style="color: #E36209">e</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (Q-&gt;rear </span><span style="color: #D73A49">&gt;=</span><span style="color: #24292E">MAXSIZE){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (</span><span style="color: #D73A49">!</span><span style="color: #6F42C1">queueFull</span><span style="color: #24292E">(Q)){</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;data[Q-&gt;rear] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> e;</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;rear</span><span style="color: #D73A49">++</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<p>注意，该方法时间复杂度较大，对于大量数据可能效率会很低</p>
<h3 id="获取队头元素">获取队头元素</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 获取队头元素</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">getHead</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">, </span><span style="color: #6F42C1">ElemType</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">e</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (</span><span style="color: #6F42C1">isEmpty</span><span style="color: #24292E">(Q)){</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6F42C1">printf</span><span style="color: #24292E">(</span><span style="color: #032F62">"Empty"</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">*</span><span style="color: #24292E">e </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Q-&gt;data[Q-&gt;front];</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h3 id="动态分配内存">动态分配内存</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">int</span><span style="color: #24292E"> ElemType;</span></span>
<span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">struct</span><span style="color: #24292E"> {</span></span>
<span class="line"><span style="color: #24292E">  ElemType </span><span style="color: #D73A49">*</span><span style="color: #24292E">data;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> front;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">int</span><span style="color: #24292E"> rear;</span></span>
<span class="line"><span style="color: #24292E">}</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 初始化队列</span></span>
<span class="line"><span style="color: #6F42C1">Queue</span><span style="color: #D73A49">*</span><span style="color: #24292E"> </span><span style="color: #6F42C1">initQueue</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  Queue </span><span style="color: #D73A49">*</span><span style="color: #24292E">q </span><span style="color: #D73A49">=</span><span style="color: #24292E"> (Queue</span><span style="color: #D73A49">*</span><span style="color: #24292E">)</span><span style="color: #6F42C1">malloc</span><span style="color: #24292E">(</span><span style="color: #D73A49">sizeof</span><span style="color: #24292E">(Queue));</span></span>
<span class="line"><span style="color: #24292E">  q-&gt;data </span><span style="color: #D73A49">=</span><span style="color: #24292E"> (ElemType)</span><span style="color: #6F42C1">malloc</span><span style="color: #24292E">(</span><span style="color: #D73A49">sizeof</span><span style="color: #24292E">(ElemType)</span><span style="color: #D73A49">*</span><span style="color: #24292E">MAXSIZE);</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;front </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;rear </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> q;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h2 id="循环队列">循环队列</h2>
<p>循环队列可以避免整体移动位置的情况</p>
<p>即让front指向队头的前一个元素，rear指向队尾元素</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325190247849.png" class="" title="循环队列">
<h3 id="入队-1">入队</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 入队</span></span>
<span class="line"><span style="color: #D73A49">int</span><span style="color: #24292E"> </span><span style="color: #6F42C1">enqueue</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">Q</span><span style="color: #24292E">, </span><span style="color: #6F42C1">ElemType</span><span style="color: #24292E"> </span><span style="color: #E36209">e</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> ((Q-&gt;rear</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">)</span><span style="color: #D73A49">%</span><span style="color: #24292E">MAXSIZE </span><span style="color: #D73A49">==</span><span style="color: #24292E"> Q-&gt;front){</span><span style="color: #6A737D"> // 循环队列判满</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #6F42C1">printf</span><span style="color: #24292E">(</span><span style="color: #032F62">"Full"</span><span style="color: #24292E">);</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;data[Q-&gt;rear] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> e;</span></span>
<span class="line"><span style="color: #24292E">  Q-&gt;rear </span><span style="color: #D73A49">=</span><span style="color: #24292E"> (Q-&gt;rear</span><span style="color: #D73A49">+</span><span style="color: #005CC5">1</span><span style="color: #24292E">)</span><span style="color: #D73A49">%</span><span style="color: #24292E">MAXSIZE;</span><span style="color: #6A737D"> // 循环在队尾加1</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<p>取余保证在0到MAXSIZE-1的范围内循环下标</p>
<h3 id="填不满的循环队列">填不满的循环队列</h3>
<p>有这么一种情况：</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325191758942.png" class="" title="循环队列的bug">
<p>在上次入队后，rear+1，队尾到达0位置</p>
<p>此时若再进行入队操作，首先判断<code>(Q-&gt;rear+1)%MAXSIZE</code>，结果为1，此时正好满足<code>rear==front</code>意为堆满</p>
<p>但实际上还留有一个位置，用于判断堆满（与队空区分），若不留空则队满与队空的判断条件一样，无法判断</p>
<h3 id="计算元素个数">计算元素个数</h3>
<ol type="1">
<li><strong>rear&gt;front</strong></li>
</ol>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325193014057.png" class="" title="元素个数1">
<p>此时元素个数=<code>rear-front</code></p>
<ol start="2" type="1">
<li><strong>rear&gt;front</strong></li>
</ol>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325193235681.png" class="" title="元素个数2">
<p>分两块计算：0到rear与front到maxsize</p>
<p>即元素个数=<code>rear+1+MAXSIZE-front-1</code>=<code>rear-front+MAXSIZE</code></p>
<p>综上，计算公式可以写作<code>(rear-front+MAXSIZE)%MAXSIZE</code></p>
<h3 id="另两种循环队列">另两种循环队列</h3>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325194256752.png" class="" title="type1">
<p>此时front指向当前队头元素，rear指向队尾元素的后一个元素</p>
<p>队空：<code>front==rear</code></p>
<p>队满：<code>front=(rear+1)%MAXSIZE</code>，也要空出一个位置</p>
<p>元素个数：与上一种一样</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325195911661.png" class="" title="type2">
<p>此时front指向队头元素，rear指向队尾元素</p>
<p>队空：<code>front=(rear+1)%MAXSIZE</code></p>
<p>入队情况有两种：</p>
<p>第一种是<strong>先入队再判满</strong></p>
<p>可以发现当<code>rear==front</code>时，队中有一个元素</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325200400276.png" class="" title="full">
<p>为了留一个空位判断队空队满，所以当<code>front==(rear+2)%MAXSIZE</code>时有队满</p>
<p>元素个数：</p>
<ol type="1">
<li><p>rear&gt;front</p>
<p>此时元素个数=<code>rear-front+1</code></p></li>
<li><p>rear&lt;front</p></li>
</ol>
<p>​ 分两块讨论，0到rear与front到maxsize</p>
<p>​ 即元素个数=<code>rear+1+MAXSIZE-front</code></p>
<p>综上，元素个数=<code>(rear-front+1+MAXSIZE)%MAXSIZE</code></p>
<h2 id="链表实现">链表实现</h2>
<h3 id="构建队列">构建队列</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">int</span><span style="color: #24292E"> ElemType;</span></span>
<span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">struct</span><span style="color: #24292E"> </span><span style="color: #6F42C1">QueueNode</span><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  ElemType data;</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">struct</span><span style="color: #24292E"> </span><span style="color: #6F42C1">QueueNode</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #24292E">next;</span></span>
<span class="line"><span style="color: #24292E">}</span><span style="color: #6F42C1">QueueNode</span><span style="color: #24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">typedef</span><span style="color: #24292E"> </span><span style="color: #D73A49">struct</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Queue</span></span>
<span class="line"><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  QueueNode </span><span style="color: #D73A49">*</span><span style="color: #24292E">front;</span></span>
<span class="line"><span style="color: #24292E">  QueueNode </span><span style="color: #D73A49">*</span><span style="color: #24292E">rear;</span></span>
<span class="line"><span style="color: #24292E">}</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E">;</span></span></code></pre></div></div></figure>
<p>这里多定义了一个结构体Queue，记录队头与队尾指针，而QueueNode为存储数据的链表</p>
<h3 id="初始化-1">初始化</h3>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 初始化</span></span>
<span class="line"><span style="color: #6F42C1">Queue</span><span style="color: #D73A49">*</span><span style="color: #24292E"> </span><span style="color: #6F42C1">initQueue</span><span style="color: #24292E">(){</span></span>
<span class="line"><span style="color: #24292E">    Queue</span><span style="color: #D73A49">*</span><span style="color: #24292E"> q </span><span style="color: #D73A49">=</span><span style="color: #24292E"> (Queue</span><span style="color: #D73A49">*</span><span style="color: #24292E">)</span><span style="color: #6F42C1">malloc</span><span style="color: #24292E">(</span><span style="color: #D73A49">sizeof</span><span style="color: #24292E">(Queue));</span></span>
<span class="line"><span style="color: #24292E">    QueueNode</span><span style="color: #D73A49">*</span><span style="color: #24292E"> node </span><span style="color: #D73A49">=</span><span style="color: #24292E"> (QueueNode</span><span style="color: #D73A49">*</span><span style="color: #24292E">)</span><span style="color: #6F42C1">malloc</span><span style="color: #24292E">(</span><span style="color: #D73A49">sizeof</span><span style="color: #24292E">(QueueNode));</span><span style="color: #6A737D"> // 定义一个头节点</span></span>
<span class="line"><span style="color: #24292E">    node-&gt;data </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span><span style="color: #6A737D"> // 头节点的data为0</span></span>
<span class="line"><span style="color: #24292E">    node-&gt;next </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">NULL</span><span style="color: #24292E">;</span><span style="color: #6A737D"> // 空队列</span></span>
<span class="line"><span style="color: #24292E">    q-&gt;front </span><span style="color: #D73A49">=</span><span style="color: #24292E"> node;</span><span style="color: #6A737D"> // 队头指向头节点</span></span>
<span class="line"><span style="color: #24292E">    q-&gt;rear </span><span style="color: #D73A49">=</span><span style="color: #24292E"> node;</span><span style="color: #6A737D"> // 队尾指向头节点</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #D73A49">return</span><span style="color: #24292E"> q;</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h3 id="入队-2">入队</h3>
<p>使用尾插法，此时认为队头为首节点，队尾为尾节点</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325202418686.png" class="" title="链表实现-插入节点1">
<p>创建新节点</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325202444945.png" class="" title="链表实现-插入节点2">
<p>让头节点的next指向该节点</p>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325202513666.png" class="" title="链表实现-插入节点3">
<p>尾指针后移一位</p>
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 入队</span></span>
<span class="line"><span style="color: #D73A49">void</span><span style="color: #24292E"> </span><span style="color: #6F42C1">enqueue</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">q</span><span style="color: #24292E">, </span><span style="color: #6F42C1">ElemType</span><span style="color: #24292E"> </span><span style="color: #E36209">e</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  QueueNode</span><span style="color: #D73A49">*</span><span style="color: #24292E"> node </span><span style="color: #D73A49">=</span><span style="color: #24292E"> (QueueNode</span><span style="color: #D73A49">*</span><span style="color: #24292E">)</span><span style="color: #6F42C1">malloc</span><span style="color: #24292E">(</span><span style="color: #D73A49">sizeof</span><span style="color: #24292E">(QueueNode));</span></span>
<span class="line"><span style="color: #24292E">  node-&gt;data </span><span style="color: #D73A49">=</span><span style="color: #24292E"> e;</span></span>
<span class="line"><span style="color: #24292E">  node-&gt;next </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">NULL</span><span style="color: #24292E">;</span></span>
<span class="line"><span style="color: #24292E">  q-&gt;rear-&gt;next </span><span style="color: #D73A49">=</span><span style="color: #24292E"> node;</span><span style="color: #6A737D"> // 原来队尾指针指向节点的next指向新节点</span></span>
<span class="line"><span style="color: #24292E">  q-&gt;rear </span><span style="color: #D73A49">=</span><span style="color: #24292E"> node;</span><span style="color: #6A737D"> // 队尾指针移到新节点</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h3 id="出队-1">出队</h3>
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325203533196.png" class="" title="链表实现-出队1">
<img src="/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/image-20250325203602101.png" class="" title="链表实现-出队2">
<figure class="shiki c++"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki github-light"><code><span class="line"><span style="color: #6A737D">// 出队</span></span>
<span class="line"><span style="color: #D73A49">void</span><span style="color: #24292E"> </span><span style="color: #6F42C1">dequeue</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Queue</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">q</span><span style="color: #24292E">, </span><span style="color: #6F42C1">ElemType</span><span style="color: #24292E"> </span><span style="color: #D73A49">*</span><span style="color: #E36209">e</span><span style="color: #24292E">){</span></span>
<span class="line"><span style="color: #24292E">  QueueNode</span><span style="color: #D73A49">*</span><span style="color: #24292E"> node </span><span style="color: #D73A49">=</span><span style="color: #24292E"> q-&gt;front-&gt;next;</span><span style="color: #6A737D"> // 要删除的节点是头节点的后一个节点（对头结点）</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">*</span><span style="color: #24292E">e </span><span style="color: #D73A49">=</span><span style="color: #24292E"> node-&gt;data;</span><span style="color: #6A737D"> // 取出要删除的元素</span></span>
<span class="line"><span style="color: #24292E">  q-&gt;front-&gt;next </span><span style="color: #D73A49">=</span><span style="color: #24292E"> node-&gt;next;</span><span style="color: #6A737D"> // 让头节点的下一个元素指向要删除节点的下一个元素</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (q-&gt;rear </span><span style="color: #D73A49">==</span><span style="color: #24292E"> node){</span><span style="color: #6A737D"> // 若只有一个节点（删除的是尾节点）</span></span>
<span class="line"><span style="color: #24292E">    q-&gt;rear </span><span style="color: #D73A49">==</span><span style="color: #24292E"> q-&gt;front;</span><span style="color: #6A737D"> // 讲队列设为空</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #6F42C1">free</span><span style="color: #24292E">(node);</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre></div></div></figure>
<h2 id="单调队列">单调队列</h2>
<p>假设有一个数组(如<code>[5,2,6,3,7,2,5,3]</code>)，使用滑动窗口，通过对l++,
r++实现让数字进入进出窗口</p>
<p>单调队列可以实现在滑动窗口每一时刻获得窗口中的
最大最小值，以低成本</p>
<p>单调队列通过双端队列实现，假设要求最大值，则双端队列从头到尾依次是从大到小，存储的是元素下标</p>
<p><strong>右侧拓展：</strong></p>
<p>队列为空时，第一个元素的下标进入(0-&gt;5)</p>
<p>若下一个元素进入满足严格从大到小，则进入，否则将最尾端元素弹出，直到满足从大到小</p>
<p><strong>左侧收缩：</strong></p>
<p>滑动窗口滑动，则不在指定范围内的下标从队头弹出</p>
<p>由此可以发现，每时最大值应为<strong>队头下标对应元素</strong></p>
<p><strong>How？</strong></p>
<p>单调队列维持了每次最值的可能性</p>
<p>满足严格从大到小的顺序的队列保证了在前一个元素从队头弹出的情况下，下一个元素成为最大值</p>
<p>由于窗口不回退，当更大的数进入时，前面比它小的数便没有机会成为某时刻的最大值了，故可以弹出</p>
<p><strong>时间复杂度：</strong>最坏<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.495ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2429 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(2040,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></span></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/list/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/list/">1</a><span class="space">&hellip;</span><a class="page-number" href="/list/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/list/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/list/page/11/">11</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/list/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">IzayoiSakuye</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

<!-- hexo injector body_end start -->
<script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script>

  <script>
  const CODE_CONFIG = {
    beautify: true,
    highlightCopy: true,
    highlightLang: true,
    highlightHeightLimit: undefined,
    isHighlightShrink: false,
    copy: {
      success: 'Copy Success',
      error: 'Copy Error',
      noSupport: 'Browser Not Support',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body>
</html>
